<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Fetching data with react | James Hughes</title>
<meta name=keywords content="ReactJS,nodejs"><meta name=description content="What use is an app that can&rsquo;t persist data?
I&rsquo;m continuing this from my previous post about my efforts to learn about react.  I want to be able to persist my data on a server and display it on a web client.  To my understanding, this should be pretty simple so I&rsquo;m going to put that theory to the test.
Firstly!
We&rsquo;re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It&rsquo;s located here and requires you to have Node.js installed and access to a MongoDB Instance.  Follow the instructions in that repo to get up and running.  If you don&rsquo;t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts."><meta name=author content="James D Hughes"><link rel=canonical href=https://blog.jimdhughes.com/posts/2018/fetching-data-with-react/><meta name=google-site-verification content="G-0ET0VYDXCL"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.jimdhughes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.jimdhughes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.jimdhughes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.jimdhughes.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.jimdhughes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.jimdhughes.com/posts/2018/fetching-data-with-react/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.jimdhughes.com/posts/2018/fetching-data-with-react/"><meta property="og:site_name" content="James Hughes"><meta property="og:title" content="Fetching data with react"><meta property="og:description" content="What use is an app that can’t persist data?
I’m continuing this from my previous post about my efforts to learn about react. I want to be able to persist my data on a server and display it on a web client. To my understanding, this should be pretty simple so I’m going to put that theory to the test.
Firstly! We’re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It’s located here and requires you to have Node.js installed and access to a MongoDB Instance. Follow the instructions in that repo to get up and running. If you don’t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-29T02:37:01+00:00"><meta property="article:modified_time" content="2018-08-29T02:37:01+00:00"><meta property="article:tag" content="ReactJS"><meta property="article:tag" content="Nodejs"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fetching data with react"><meta name=twitter:description content="What use is an app that can&rsquo;t persist data?
I&rsquo;m continuing this from my previous post about my efforts to learn about react.  I want to be able to persist my data on a server and display it on a web client.  To my understanding, this should be pretty simple so I&rsquo;m going to put that theory to the test.
Firstly!
We&rsquo;re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It&rsquo;s located here and requires you to have Node.js installed and access to a MongoDB Instance.  Follow the instructions in that repo to get up and running.  If you don&rsquo;t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Fetching data with react","item":"https://blog.jimdhughes.com/posts/2018/fetching-data-with-react/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fetching data with react","name":"Fetching data with react","description":"What use is an app that can\u0026rsquo;t persist data?\nI\u0026rsquo;m continuing this from my previous post about my efforts to learn about react. I want to be able to persist my data on a server and display it on a web client. To my understanding, this should be pretty simple so I\u0026rsquo;m going to put that theory to the test.\nFirstly! We\u0026rsquo;re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It\u0026rsquo;s located here and requires you to have Node.js installed and access to a MongoDB Instance. Follow the instructions in that repo to get up and running. If you don\u0026rsquo;t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts.\n","keywords":["ReactJS","nodejs"],"articleBody":"What use is an app that can’t persist data?\nI’m continuing this from my previous post about my efforts to learn about react. I want to be able to persist my data on a server and display it on a web client. To my understanding, this should be pretty simple so I’m going to put that theory to the test.\nFirstly! We’re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It’s located here and requires you to have Node.js installed and access to a MongoDB Instance. Follow the instructions in that repo to get up and running. If you don’t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts.\nSince I’m not going to cover authentication yet, we need to set up a model and endpoints for our Todo’s that are going to be 100% public. To do this add the following code to the models/todo.model.js file.\n// models/todo.model.js const mongoose = require('mongoose'); const todoSchema = mongoose.Schema({ todo: { type: String, required: true }, date: { type: Date, required: true, default: () =\u003e new Date() }, completed: { type: Boolean, required: true, default: false } }); module.exports = mongoose.model('Todo', todoSchema); Then we load the model in models/index.js\n// models/index.js // ... require('./todo.model'); Then we need some endpoints to handle our Todos:\nconst router = require('express').Router(); const Todo = require('mongoose').model('Todo'); router.route('/') .get(getTodos) .post(createTodo) router.route('/:id') .get(getTodo) .put(updateTodo) .delete(deleteTodo); module.exports = router; async function getTodos(req, res, next) { try { let todos = await Todo.find(); return res.json(todos); } catch (e) { next(e); } } async function createTodo(req, res, next) { let todo = req.body; try { todo = await Todo.create(todo); return res.status(201).json(todo); } catch (e) { next(e); } } async function getTodo(req, res, next) { let id = req.params.id; try { let todo = await Todo.findById(id); return res.json(todo); } catch(e) { next(e); } } async function updateTodo(req, res, next) { let id = req.params.id; let todo = req.body; try { todo = await Todo.findByIdAndUpdate(id, todo, {new: true}); return res.json(todo); } catch(e) { next(e); } } async function deleteTodo(req, res, next) { let id = req.params.id; try { await Todo.findByIdAndRemove(id); } catch(e) { next(e); } } Then we require it in our routes/index.js file:\n// routes/index.js module.exports = { users: require('./users'), authentication: require('./authentication'), me: require('./me'), assets: require('./assets'), todos: require('./todos') } Then we load it up and map it to an express handler in app.js\n// app.js // ... app.use('/api/v1/todos', routes.todos); // ... Two more things to do here.\n1: Enable CORS. Since we are accessing this API from another app that will be hosted on a separate port, we will need to allow access to it.\n// app.js /** * Enable Cors */ app.use(function (req, res, next) { res.header('Access-Control-Allow-Origin', 'http://localhost:3000'); res.header('Access-Control-Allow-Headers', 'Origin,X-Requested-With,Content-Type,Accept,responseType'); res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS'); next(); }); Since I’m not familiar with React configuration, I’m going to just set my Express API to serve on port 3001 instead of 3000. Depending on your OS you can do this differently: // Powershell $env:PORT=\"3001\" // Command Line set PORT=3001\u0026npm start // Ubuntu PORT=3001 npm start There we go. API is running on http://localhost:3001/api/todos Now it’s time to get to the meat and potatoes of this post! Head over to your react app and type npm start I’m using the Todo app that I built in a previous post with a few minor modifications. I released this on my github under the release v0.1: https://github.com/jimdhughes/react-todos-blog/releases/tag/v0.1\nInstall it using npm install and run with npm serve You should see our minimal Todos app that uses local storage for persistence.\nFirstly, let’s create a new folder to handle our api functionality. Simply called api.\nIn this folder, I’m going to make a helper that will expose FETCH functionality in an easier-to-use way that will set the headers and implement the verbs as required.\nSo let’s create the files api/api.service.js with the following structure:\n// api/api.service.js const API_URI = \"http://localhost:3001/api/v1/\"; const headers = { \"Content-Type\":\"application/json\", \"Accept\":\"application/json\" } class Api { get(endpoint, params = {}) { return fetch(API_URI+endpoint, { params: params, headers: headers }) .then(r=\u003er.json()); } } export default Api; Now that we have this neato helper, we can use it in our Todo Service with a little more ease!\n// api/todo.service.js import Api from './api.service'; class TodoService extends Api { constructor() { super(); } getTodos() { return this.get('todos'); } } We import this service into our TodoList component to make the magic happen! There are going to be a lot of changes to this file so hopefully I don’t bungle it up too much in the post.\n// components/TodoList/TodoList.js import React from 'react'; import TodoService from '../../api/todo.service'; import TodoInput from '../TodoInput/TodoInput'; import './TodoList.css'; class TodoList extends React.Component { constructor(props) { super(props); this.state = { todos: [], text: '' } this._service = new TodoService(); } componentWillMount() { this._loadTodosFromApi(); } async _loadTodosFromApi() { try { let todos = await this._service.getTodos(); this.setState({ todos }); } catch(e) { // You should handle this better console.error(e); throw e; } } // ... } This is pretty straight forward. We import the TodoService, we initialize it in our constructor. In the componentWillMount life cycle hook we load our Todos from our api by calling this._loadTodosFromApi(). I think the async/await implementation was the greatest thing to happen to javascript development in the last 10,000 years. Therefore I use it all the time instead of callbacks and promises. We wait for the service to return make our API call and return the JSON body. We then set the state in our component. Pretty straight forward!\nThe next logical step would be to amend our “create todo” workflow. Instead of just pushing to a list in the state and persisting to localstorage, we should POST it to the API and then add it into the state assuming everything is successful. We have a few things to do now (todo, get it?)\n// api/api.service.js //... class Api { // ... post(endpoint, body) { return fetch(API_URI+endpoint, { method:'POST', headers:headers, body: body }) .then(r=\u003er.json()); } } // api/todo.service.js class TodoService extends Api { // ... createTodo(todo) { return this.post('todos', todo); } } In our TodoList component, we now amend our onKeypress function to leverage the service!\n//components/TodoList/TodoList.js class TodoList extends React.Component { // ... onKeypress = (e) =\u003e { if (e.key === 'Enter') { if (this.state.text) { this._onSaveTodo(); } else { alert('Nothing to do!'); } } } async _onSaveTodo() { try { let text = this.state.text; let todo = await this._service.createTodo({todo: text}); this.setState(s=\u003e{ return {todos: [...s.todos, todo], text:''}; }) } catch(e) { alert('Error Creating Todo!'); } } // ... } Now when you add a Todo… Explosions Happen! Since we’re dealing with objects instead of just text, we need to update our Render function to include a key on the compnent and to display the todo text as opposed to just the {t}.\n// app/components/TodoList/TodoList.js class TodoList extends React.Component { // ... render() { return ( \u003cdiv\u003e \u003cdiv className=\"todos\"\u003e \u003cTodoInput type=\"text\" placeholder=\"Add a Todo\" value={this.state.text} onChange={this.onChange} onKeyPress={this.onKeypress} /\u003e \u003c/div\u003e \u003cul className=\"todo-list\"\u003e {this.state.todos.map((t, index) =\u003e \u003cli key = {t._id}\u003e \u003cbutton type=\"button\" onClick={this.onDeleteTodo} value={index}\u003eX\u003c/button\u003e {t.todo} \u003c/li\u003e) } \u003c/ul\u003e \u003c/div\u003e ); } // ... } Once you hit save, you should see your todo pop up. Go ahead and add a few more and you will see it’s creating as intended. Hit refresh and you will see that they have been all successfully saved in our API.\nOn the same token, we will need to update our onDeleteTodo function to destroy the asset on the server. To do this, we will have to implement the delete function in our Api service and then add a deleteTodo function in our TodoService\n// api/api.service.js class Api { // ... delete(endpoint) { return fetch(API_URI+endpoint, { method:'DELETE', headers: headers }) .then(r=\u003er.json()); } } // api/todo.service.js class TodoService extends Api { // ... deleteTodo(id) { return this.delete('todos/'+id); } } Finally we can update our onDeleteTodo function in our TodoList component.\n// components/TodoList/TodoList.js onDeleteTodo(todo) { this._onDeleteTodo(todo); } async _onDeleteTodo(todo) { try { let index = this.state.todos.indexOf(todo); await this._service.deleteTodo(todo._id); this.setState(s =\u003e { let todos = s.todos; todos.splice(index, 1); return { todos } }) } catch (e) { alert('Error Deleting Todo'); } } I realize the naming might be a little confusing here, but I don’t want to change too much. This still won’t work however as we now need to update our render to be able to handle calling this function.\n// components/TodoList/TodoList.js render() { //... \u003cul className=\"todo-list\"\u003e {this.state.todos.map((t, index) =\u003e \u003cli key={t._id}\u003e \u003cbutton type=\"button\" onClick={() =\u003e this.onDeleteTodo(t)}\u003eX\u003c/button\u003e {t.todo} \u003c/li\u003e) } \u003c/ul\u003e // ... } For fun, we may as well make use of the other endpoints that we made. Let’s add a checkbox to our Todos as well! We will handle the checkbox click by updating the Todos completed field.\nAgain, we need to implement our API handlers\n// app/api.service.js class Api { // ... put(endpoint, body) { return fetch(API_URI+endpoint, { method:'PUT', headers: headers, body: JSON.stringify(body) }).then(r=\u003er.json()); } } // app/todo.service.js class TodoService extends Api { // ... updateTodo(todo) { return this.put('todos/'+todo._id, todo); } } Then we add some handlers in our TodoList component\n// components/TodoList/TodoList.js class TodoList extends React.Compnent { // ... async _onUpdateTodo(todo) { try { let index = this.state.todos.indexOf(todo); todo = await this._service.updateTodo(todo); this.setState(s=\u003e{ let todos = s.todos; todos.splice(index, 1, todo); return {todos}; }); } catch(e) { alert('Error Updating Todo!'); } } onCheckTodo(todo) { todo.completed = !todo.completed; this._onUpdateTodo(todo); } render(){ return ( // ... \u003cul className=\"todo-list\"\u003e {this.state.todos.map((t, index) =\u003e \u003cli key={t._id}\u003e \u003cbutton type=\"button\" onClick={() =\u003e this.onDeleteTodo(t)}\u003eX\u003c/button\u003e {t.todo} \u003cinput type=\"checkbox\" checked = {t.completed} className=\"todo-checkbox\" onChange = {()=\u003ethis.onCheckTodo(t)}/\u003e \u003c/li\u003e) } \u003c/ul\u003e // ... ); } } I have some css you can check out in the project’s github. I’m awful at CSS honestly so I wouldn’t suggest taking it too seriously.\nThere you have it! A Todo app written in full stack javascript using React.js.\nNext, I’ll dabble with authentication and handling it in this app as well. This code will be released under the v0.2 tag in the same github repository as on the top.\nUntil Then!\n","wordCount":"1672","inLanguage":"en","datePublished":"2018-08-29T02:37:01Z","dateModified":"2018-08-29T02:37:01Z","author":{"@type":"Person","name":"James D Hughes"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.jimdhughes.com/posts/2018/fetching-data-with-react/"},"publisher":{"@type":"Organization","name":"James Hughes","logo":{"@type":"ImageObject","url":"https://blog.jimdhughes.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.jimdhughes.com/ accesskey=h title="James Hughes (Alt + H)">James Hughes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Fetching data with react</h1><div class=post-meta><span title='2018-08-29 02:37:01 +0000 UTC'>August 29, 2018</span>&nbsp;·&nbsp;James D Hughes</div></header><div class=post-content><p>What use is an app that can&rsquo;t persist data?</p><p>I&rsquo;m continuing this from my previous post about my efforts to learn about react. I want to be able to persist my data on a server and display it on a web client. To my understanding, this should be pretty simple so I&rsquo;m going to put that theory to the test.</p><h1 id=firstly>Firstly!<a hidden class=anchor aria-hidden=true href=#firstly>#</a></h1><p>We&rsquo;re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It&rsquo;s located <a href=https://github.com/jimdhughes/jdhc-express-stateless-template>here</a> and requires you to have Node.js installed and access to a MongoDB Instance. Follow the instructions in that repo to get up and running. If you don&rsquo;t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts.</p><p>Since I&rsquo;m not going to cover authentication yet, we need to set up a model and endpoints for our Todo&rsquo;s that are going to be 100% public. To do this add the following code to the <code>models/todo.model.js</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// models/todo.model.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mongoose</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;mongoose&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>todoSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mongoose</span>.<span style=color:#a6e22e>Schema</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>todo</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>date</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Date, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>new</span> Date() },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>completed</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> }
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mongoose</span>.<span style=color:#a6e22e>model</span>(<span style=color:#e6db74>&#39;Todo&#39;</span>, <span style=color:#a6e22e>todoSchema</span>);
</span></span></code></pre></div><p>Then we load the model in <code>models/index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// models/index.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./todo.model&#39;</span>);
</span></span></code></pre></div><p>Then we need some endpoints to handle our Todos:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;express&#39;</span>).<span style=color:#a6e22e>Router</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Todo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;mongoose&#39;</span>).<span style=color:#a6e22e>model</span>(<span style=color:#e6db74>&#39;Todo&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>route</span>(<span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>getTodos</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>post</span>(<span style=color:#a6e22e>createTodo</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>route</span>(<span style=color:#e6db74>&#39;/:id&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>getTodo</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>put</span>(<span style=color:#a6e22e>updateTodo</span>)
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>delete</span>(<span style=color:#a6e22e>deleteTodo</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getTodos</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todos</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Todo</span>.<span style=color:#a6e22e>find</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>(<span style=color:#a6e22e>todos</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) { 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>e</span>); 
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createTodo</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Todo</span>.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>201</span>).<span style=color:#a6e22e>json</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getTodo</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Todo</span>.<span style=color:#a6e22e>findById</span>(<span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateTodo</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Todo</span>.<span style=color:#a6e22e>findByIdAndUpdate</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>todo</span>, {<span style=color:#66d9ef>new</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>});
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>deleteTodo</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Todo</span>.<span style=color:#a6e22e>findByIdAndRemove</span>(<span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then we require it in our <code>routes/index.js</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// routes/index.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>users</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./users&#39;</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>authentication</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./authentication&#39;</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>me</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./me&#39;</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>assets</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./assets&#39;</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>todos</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;./todos&#39;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then we load it up and map it to an express handler in <code>app.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app.js
</span></span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#e6db74>&#39;/api/v1/todos&#39;</span>, <span style=color:#a6e22e>routes</span>.<span style=color:#a6e22e>todos</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span></code></pre></div><p>Two more things to do here.</p><p>1: Enable CORS. Since we are accessing this API from another app that will be hosted on a separate port, we will need to allow access to it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Enable Cors
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Origin&#39;</span>, <span style=color:#e6db74>&#39;http://localhost:3000&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Headers&#39;</span>, <span style=color:#e6db74>&#39;Origin,X-Requested-With,Content-Type,Accept,responseType&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Methods&#39;</span>, <span style=color:#e6db74>&#39;GET,PUT,POST,DELETE,OPTIONS&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>next</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=2><li>Since I&rsquo;m not familiar with React configuration, I&rsquo;m going to just set my Express API to serve on port 3001 instead of 3000. Depending on your OS you can do this differently:</li></ol><pre tabindex=0><code>// Powershell
$env:PORT=&#34;3001&#34;
// Command Line
set PORT=3001&amp;npm start
// Ubuntu
PORT=3001 npm start
</code></pre><p>There we go. API is running on <code>http://localhost:3001/api/todos</code> Now it&rsquo;s time to get to the meat and potatoes of this post! Head over to your react app and type <code>npm start</code> I&rsquo;m using the Todo app that I built in a previous post with a few minor modifications. I released this on my github under the release v0.1: <a href=https://github.com/jimdhughes/react-todos-blog/releases/tag/v0.1>https://github.com/jimdhughes/react-todos-blog/releases/tag/v0.1</a></p><p>Install it using <code>npm install</code> and run with <code>npm serve</code> You should see our minimal Todos app that uses local storage for persistence.</p><p>Firstly, let&rsquo;s create a new folder to handle our api functionality. Simply called <code>api</code>.</p><p>In this folder, I&rsquo;m going to make a helper that will expose FETCH functionality in an easier-to-use way that will set the headers and implement the verbs as required.</p><p>So let&rsquo;s create the files <code>api/api.service.js</code> with the following structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// api/api.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>API_URI</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://localhost:3001/api/v1/&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Content-Type&#34;</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Accept&#34;</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#34;application/json&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>endpoint</span>, <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> {}) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>API_URI</span><span style=color:#f92672>+</span><span style=color:#a6e22e>endpoint</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>headers</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>r</span>=&gt;<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>json</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>Api</span>;
</span></span></code></pre></div><p>Now that we have this neato helper, we can use it in our Todo Service with a little more ease!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// api/todo.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Api</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./api.service&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoService</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getTodos</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;todos&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We import this service into our TodoList component to make the magic happen! There are going to be a lot of changes to this file so hopefully I don&rsquo;t bungle it up too much in the post.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TodoService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../../api/todo.service&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TodoInput</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../TodoInput/TodoInput&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./TodoList.css&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoList</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>props</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>todos</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_service</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TodoService</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>componentWillMount</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_loadTodosFromApi</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>_loadTodosFromApi</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todos</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_service</span>.<span style=color:#a6e22e>getTodos</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({ <span style=color:#a6e22e>todos</span> });
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// You should handle this better
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#a6e22e>e</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#75715e>// ... 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>This is pretty straight forward. We import the TodoService, we initialize it in our constructor. In the <code>componentWillMount</code> life cycle hook we load our Todos from our api by calling <code>this._loadTodosFromApi()</code>. I think the async/await implementation was the greatest thing to happen to javascript development in the last 10,000 years. Therefore I use it all the time instead of callbacks and promises. We wait for the service to return make our API call and return the JSON body. We then set the state in our component. Pretty straight forward!</p><p>The next logical step would be to amend our &ldquo;create todo&rdquo; workflow. Instead of just pushing to a list in the state and persisting to localstorage, we should POST it to the API and then add it into the state assuming everything is successful. We have a few things to do now (todo, get it?)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// api/api.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>post</span>(<span style=color:#a6e22e>endpoint</span>, <span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>API_URI</span><span style=color:#f92672>+</span><span style=color:#a6e22e>endpoint</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span><span style=color:#a6e22e>headers</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>body</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>r</span>=&gt;<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>json</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// api/todo.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoService</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>createTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;todos&#39;</span>, <span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In our <code>TodoList</code> component, we now amend our <code>onKeypress</code> function to leverage the service!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>//components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoList</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>onKeypress</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>e</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Enter&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>text</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_onSaveTodo</span>();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Nothing to do!&#39;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>_onSaveTodo</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>text</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_service</span>.<span style=color:#a6e22e>createTodo</span>({<span style=color:#a6e22e>todo</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>text</span>});
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>s</span>=&gt;{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>todos</span><span style=color:#f92672>:</span> [...<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>todos</span>, <span style=color:#a6e22e>todo</span>], <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;&#39;</span>};
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Error Creating Todo!&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Now when you add a Todo&mldr; Explosions Happen! Since we&rsquo;re dealing with objects instead of just text, we need to update our Render function to include a key on the compnent and to display the todo text as opposed to just the {t}.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app/components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoList</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;todos&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TodoInput</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Add a Todo&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>text</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onChange</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>onKeyPress</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onKeypress</span>}
</span></span><span style=display:flex><span>          <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ul</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;todo-list&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          {<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>index</span>) =&gt;
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>li</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>_id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onDeleteTodo</span>} <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>index</span>}<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>X</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>              {<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>todo</span>}
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/li&gt;)</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/ul&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Once you hit save, you should see your todo pop up. Go ahead and add a few more and you will see it&rsquo;s creating as intended. Hit refresh and you will see that they have been all successfully saved in our API.</p><p>On the same token, we will need to update our <code>onDeleteTodo</code> function to destroy the asset on the server. To do this, we will have to implement the <code>delete</code> function in our <code>Api</code> service and then add a <code>deleteTodo</code> function in our <code>TodoService</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// api/api.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>delete</span>(<span style=color:#a6e22e>endpoint</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>API_URI</span><span style=color:#f92672>+</span><span style=color:#a6e22e>endpoint</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;DELETE&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>headers</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>r</span>=&gt;<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>json</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// api/todo.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoService</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>deleteTodo</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#66d9ef>delete</span>(<span style=color:#e6db74>&#39;todos/&#39;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Finally we can update our <code>onDeleteTodo</code> function in our <code>TodoList</code> component.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onDeleteTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_onDeleteTodo</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>_onDeleteTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_service</span>.<span style=color:#a6e22e>deleteTodo</span>(<span style=color:#a6e22e>todo</span>.<span style=color:#a6e22e>_id</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>s</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>todos</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>splice</span>(<span style=color:#a6e22e>index</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>todos</span> }
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Error Deleting Todo&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>I realize the naming might be a little confusing here, but I don&rsquo;t want to change too much. This still won&rsquo;t work however as we now need to update our render to be able to handle calling this function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ul</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;todo-list&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    {<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>index</span>) =&gt;
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>li</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>_id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onDeleteTodo</span>(<span style=color:#a6e22e>t</span>)}<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>X</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>todo</span>}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/li&gt;)</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/ul&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>For fun, we may as well make use of the other endpoints that we made. Let&rsquo;s add a checkbox to our Todos as well! We will handle the checkbox click by updating the Todos completed field.</p><p>Again, we need to implement our API handlers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app/api.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>put</span>(<span style=color:#a6e22e>endpoint</span>, <span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>API_URI</span><span style=color:#f92672>+</span><span style=color:#a6e22e>endpoint</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;PUT&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>headers</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>body</span>)
</span></span><span style=display:flex><span>    }).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>r</span>=&gt;<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>json</span>());
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app/todo.service.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoService</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Api</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>updateTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#39;todos/&#39;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>todo</span>.<span style=color:#a6e22e>_id</span>, <span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then we add some handlers in our <code>TodoList</code> component</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// components/TodoList/TodoList.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TodoList</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Compnent</span> {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>_onUpdateTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>todo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_service</span>.<span style=color:#a6e22e>updateTodo</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>s</span>=&gt;{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>todos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>todos</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>splice</span>(<span style=color:#a6e22e>index</span>, <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>todos</span>};
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;Error Updating Todo!&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onCheckTodo</span>(<span style=color:#a6e22e>todo</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>todo</span>.<span style=color:#a6e22e>completed</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>todo</span>.<span style=color:#a6e22e>completed</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_onUpdateTodo</span>(<span style=color:#a6e22e>todo</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>(){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>ul</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;todo-list&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          {<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>index</span>) =&gt;
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>li</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>_id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onDeleteTodo</span>(<span style=color:#a6e22e>t</span>)}<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>X</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>              {<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>todo</span>}
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;checkbox&#34;</span> <span style=color:#a6e22e>checked</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>completed</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;todo-checkbox&#34;</span> <span style=color:#a6e22e>onChange</span> <span style=color:#f92672>=</span> {()=&gt;<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onCheckTodo</span>(<span style=color:#a6e22e>t</span>)}<span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/li&gt;)</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/ul&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I have some css you can check out in the project&rsquo;s github. I&rsquo;m awful at CSS honestly so I wouldn&rsquo;t suggest taking it too seriously.</p><p>There you have it! A Todo app written in full stack javascript using React.js.</p><p>Next, I&rsquo;ll dabble with authentication and handling it in this app as well. This code will be released under the v0.2 tag in the same github repository as on the top.</p><p>Until Then!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.jimdhughes.com/tags/reactjs/>ReactJS</a></li><li><a href=https://blog.jimdhughes.com/tags/nodejs/>Nodejs</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.jimdhughes.com/>James Hughes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>