<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.64.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Fetching data with react&nbsp;&ndash;&nbsp;James Hughes</title><link rel=stylesheet href=/css/core.min.99d761621eb15531f47d6f109c742c4d2f97f9c10fed380e3da27af7676a27a1fb5968bfbd3207717f11d40ad1d68b92.css integrity=sha384-mddhYh6xVTH0fW8QnHQsTS+X+cEP7TgOPaJ692dqJ6H7WWi/vTIHcX8R1ArR1ouS><meta name=twitter:card content="summary"><meta name=twitter:title content="Fetching data with react"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">James Hughes</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories/>Categories</a><a class="nav item" href=/tags/>Tags</a><a class="nav item" href></a><a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Fetching data with react</h1><p class="article date">Wednesday, August 29, 2018</p></section><article class="article markdown-body"><p>What use is an app that can&rsquo;t persist data?</p><p>I&rsquo;m continuing this from my previous post about my efforts to learn about react. I want to be able to persist my data on a server and display it on a web client. To my understanding, this should be pretty simple so I&rsquo;m going to put that theory to the test.</p><h1 id=firstly>Firstly!</h1><p>We&rsquo;re going to use a Node.js scaffold that I covered off in a previous posting as our backend for this app. It&rsquo;s located <a href=https://github.com/jimdhughes/jdhc-express-stateless-template target=_blank>here</a> and requires you to have Node.js installed and access to a MongoDB Instance. Follow the instructions in that repo to get up and running. If you don&rsquo;t want to use that one, you can set up your own REST service (or CouchDB instance?) and follow along with the concepts.</p><p>Since I&rsquo;m not going to cover authentication yet, we need to set up a model and endpoints for our Todo&rsquo;s that are going to be 100% public. To do this add the following code to the <code>models/todo.model.js</code> file.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// models/todo.model.js
</span><span class=c1></span><span class=kr>const</span> <span class=nx>mongoose</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mongoose&#39;</span><span class=p>)</span><span class=p>;</span>

<span class=kr>const</span> <span class=nx>todoSchema</span> <span class=o>=</span> <span class=nx>mongoose</span><span class=p>.</span><span class=nx>Schema</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>todo</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span> <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span><span class=p>,</span>
  <span class=nx>date</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span> <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=k>default</span><span class=o>:</span> <span class=p>(</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=p>)</span> <span class=p>}</span><span class=p>,</span>
  <span class=nx>completed</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=nb>Boolean</span><span class=p>,</span> <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=k>default</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span>
<span class=p>}</span><span class=p>)</span><span class=p>;</span>

<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>mongoose</span><span class=p>.</span><span class=nx>model</span><span class=p>(</span><span class=s1>&#39;Todo&#39;</span><span class=p>,</span> <span class=nx>todoSchema</span><span class=p>)</span><span class=p>;</span>

</code></pre></div><p>Then we load the model in <code>models/index.js</code></p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// models/index.js
</span><span class=c1></span>
<span class=c1>// ...
</span><span class=c1></span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./todo.model&#39;</span><span class=p>)</span><span class=p>;</span>
</code></pre></div><p>Then we need some endpoints to handle our Todos:</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>)</span><span class=p>.</span><span class=nx>Router</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
<span class=kr>const</span> <span class=nx>Todo</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mongoose&#39;</span><span class=p>)</span><span class=p>.</span><span class=nx>model</span><span class=p>(</span><span class=s1>&#39;Todo&#39;</span><span class=p>)</span><span class=p>;</span>

<span class=nx>router</span><span class=p>.</span><span class=nx>route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>getTodos</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=nx>createTodo</span><span class=p>)</span>

<span class=nx>router</span><span class=p>.</span><span class=nx>route</span><span class=p>(</span><span class=s1>&#39;/:id&#39;</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>getTodo</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=nx>updateTodo</span><span class=p>)</span>
  <span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=nx>deleteTodo</span><span class=p>)</span><span class=p>;</span>

<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>router</span><span class=p>;</span>

<span class=nx>async</span> <span class=kd>function</span> <span class=nx>getTodos</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=kd>let</span> <span class=nx>todos</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>Todo</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>todos</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span> 
    <span class=nx>next</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span> 
  <span class=p>}</span>
<span class=p>}</span>

<span class=nx>async</span> <span class=kd>function</span> <span class=nx>createTodo</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>todo</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=nx>todo</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>Todo</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>201</span><span class=p>)</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=nx>async</span> <span class=kd>function</span> <span class=nx>getTodo</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=kd>let</span> <span class=nx>todo</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>Todo</span><span class=p>.</span><span class=nx>findById</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=nx>async</span> <span class=kd>function</span> <span class=nx>updateTodo</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
  <span class=kd>let</span> <span class=nx>todo</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=nx>todo</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>Todo</span><span class=p>.</span><span class=nx>findByIdAndUpdate</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>todo</span><span class=p>,</span> <span class=p>{</span><span class=k>new</span><span class=o>:</span> <span class=kc>true</span><span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=nx>async</span> <span class=kd>function</span> <span class=nx>deleteTodo</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=nx>await</span> <span class=nx>Todo</span><span class=p>.</span><span class=nx>findByIdAndRemove</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>next</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Then we require it in our <code>routes/index.js</code> file:</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// routes/index.js
</span><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>users</span><span class=o>:</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./users&#39;</span><span class=p>)</span><span class=p>,</span>
  <span class=nx>authentication</span><span class=o>:</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./authentication&#39;</span><span class=p>)</span><span class=p>,</span>
  <span class=nx>me</span><span class=o>:</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./me&#39;</span><span class=p>)</span><span class=p>,</span>
  <span class=nx>assets</span><span class=o>:</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./assets&#39;</span><span class=p>)</span><span class=p>,</span>
  <span class=nx>todos</span><span class=o>:</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./todos&#39;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>Then we load it up and map it to an express handler in <code>app.js</code></p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// app.js
</span><span class=c1></span><span class=c1>// ...
</span><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/v1/todos&#39;</span><span class=p>,</span> <span class=nx>routes</span><span class=p>.</span><span class=nx>todos</span><span class=p>)</span><span class=p>;</span>
<span class=c1>// ...
</span></code></pre></div><p>Two more things to do here.</p><p>1: Enable CORS. Since we are accessing this API from another app that will be hosted on a separate port, we will need to allow access to it.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// app.js
</span><span class=c1></span><span class=cm>/**
</span><span class=cm> * Enable Cors
</span><span class=cm> */</span>
<span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Origin&#39;</span><span class=p>,</span> <span class=s1>&#39;http://localhost:3000&#39;</span><span class=p>)</span><span class=p>;</span>
  <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Headers&#39;</span><span class=p>,</span> <span class=s1>&#39;Origin,X-Requested-With,Content-Type,Accept,responseType&#39;</span><span class=p>)</span><span class=p>;</span>
  <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Methods&#39;</span><span class=p>,</span> <span class=s1>&#39;GET,PUT,POST,DELETE,OPTIONS&#39;</span><span class=p>)</span><span class=p>;</span>
  <span class=nx>next</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
<span class=p>}</span><span class=p>)</span><span class=p>;</span>
</code></pre></div><ol start=2><li>Since I&rsquo;m not familiar with React configuration, I&rsquo;m going to just set my Express API to serve on port 3001 instead of 3000. Depending on your OS you can do this differently:</li></ol><pre><code>// Powershell
$env:PORT=&quot;3001&quot;
// Command Line
set PORT=3001&amp;npm start
// Ubuntu
PORT=3001 npm start
</code></pre><p>There we go. API is running on <code>http://localhost:3001/api/todos</code> Now it&rsquo;s time to get to the meat and potatoes of this post! Head over to your react app and type <code>npm start</code> I&rsquo;m using the Todo app that I built in a previous post with a few minor modifications. I released this on my github under the release v0.1: <a href=https://github.com/jimdhughes/react-todos-blog/releases/tag/v0.1 target=_blank>https://github.com/jimdhughes/react-todos-blog/releases/tag/v0.1</a></p><p>Install it using <code>npm install</code> and run with <code>npm serve</code> You should see our minimal Todos app that uses local storage for persistence.</p><p>Firstly, let&rsquo;s create a new folder to handle our api functionality. Simply called <code>api</code>.</p><p>In this folder, I&rsquo;m going to make a helper that will expose FETCH functionality in an easier-to-use way that will set the headers and implement the verbs as required.</p><p>So let&rsquo;s create the files <code>api/api.service.js</code> with the following structure:</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// api/api.service.js
</span><span class=c1></span><span class=kr>const</span> <span class=nx>API_URI</span> <span class=o>=</span> <span class=s2>&#34;http://localhost:3001/api/v1/&#34;</span><span class=p>;</span>
<span class=kr>const</span> <span class=nx>headers</span> <span class=o>=</span> <span class=p>{</span>
  <span class=s2>&#34;Content-Type&#34;</span><span class=o>:</span><span class=s2>&#34;application/json&#34;</span><span class=p>,</span>
  <span class=s2>&#34;Accept&#34;</span><span class=o>:</span><span class=s2>&#34;application/json&#34;</span>
<span class=p>}</span>
<span class=kr>class</span> <span class=nx>Api</span> <span class=p>{</span>
  
  <span class=nx>get</span><span class=p>(</span><span class=nx>endpoint</span><span class=p>,</span> <span class=nx>params</span> <span class=o>=</span> <span class=p>{</span><span class=p>}</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>API_URI</span><span class=o>+</span><span class=nx>endpoint</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>params</span><span class=o>:</span> <span class=nx>params</span><span class=p>,</span>
      <span class=nx>headers</span><span class=o>:</span> <span class=nx>headers</span>
    <span class=p>}</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>r</span><span class=p>=&gt;</span><span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=p>)</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

<span class=p>}</span>

<span class=kr>export</span> <span class=k>default</span> <span class=nx>Api</span><span class=p>;</span>
</code></pre></div><p>Now that we have this neato helper, we can use it in our Todo Service with a little more ease!</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// api/todo.service.js
</span><span class=c1></span><span class=kr>import</span> <span class=nx>Api</span> <span class=nx>from</span> <span class=s1>&#39;./api.service&#39;</span><span class=p>;</span>

<span class=kr>class</span> <span class=nx>TodoService</span> <span class=kr>extends</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=kr>super</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>getTodos</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;todos&#39;</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>We import this service into our TodoList component to make the magic happen! There are going to be a lot of changes to this file so hopefully I don&rsquo;t bungle it up too much in the post.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// components/TodoList/TodoList.js
</span><span class=c1></span><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=nx>TodoService</span> <span class=nx>from</span> <span class=s1>&#39;../../api/todo.service&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=nx>TodoInput</span> <span class=nx>from</span> <span class=s1>&#39;../TodoInput/TodoInput&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=s1>&#39;./TodoList.css&#39;</span><span class=p>;</span>

<span class=kr>class</span> <span class=nx>TodoList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span>
      <span class=nx>todos</span><span class=o>:</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span>
      <span class=nx>text</span><span class=o>:</span> <span class=s1>&#39;&#39;</span>
    <span class=p>}</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>_service</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>TodoService</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
  
  <span class=nx>componentWillMount</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>_loadTodosFromApi</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
  
  <span class=nx>async</span> <span class=nx>_loadTodosFromApi</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kd>let</span> <span class=nx>todos</span> <span class=o>=</span> <span class=nx>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>getTodos</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>(</span><span class=p>{</span> <span class=nx>todos</span> <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=c1>// You should handle this better
</span><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
      <span class=k>throw</span> <span class=nx>e</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=c1>// ... 
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>This is pretty straight forward. We import the TodoService, we initialize it in our constructor. In the <code>componentWillMount</code> life cycle hook we load our Todos from our api by calling <code>this._loadTodosFromApi()</code>. I think the async/await implementation was the greatest thing to happen to javascript development in the last 10,000 years. Therefore I use it all the time instead of callbacks and promises. We wait for the service to return make our API call and return the JSON body. We then set the state in our component. Pretty straight forward!</p><p>The next logical step would be to amend our &ldquo;create todo&rdquo; workflow. Instead of just pushing to a list in the state and persisting to localstorage, we should POST it to the API and then add it into the state assuming everything is successful. We have a few things to do now (todo, get it?)</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript>
<span class=c1>// api/api.service.js
</span><span class=c1></span><span class=c1>//...
</span><span class=c1></span><span class=kr>class</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>post</span><span class=p>(</span><span class=nx>endpoint</span><span class=p>,</span> <span class=nx>body</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>API_URI</span><span class=o>+</span><span class=nx>endpoint</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>method</span><span class=o>:</span><span class=s1>&#39;POST&#39;</span><span class=p>,</span>
      <span class=nx>headers</span><span class=o>:</span><span class=nx>headers</span><span class=p>,</span>
      <span class=nx>body</span><span class=o>:</span> <span class=nx>body</span>
    <span class=p>}</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>r</span><span class=p>=&gt;</span><span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=p>)</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>


</code></pre></div><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// api/todo.service.js
</span><span class=c1></span><span class=kr>class</span> <span class=nx>TodoService</span> <span class=kr>extends</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>createTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;todos&#39;</span><span class=p>,</span> <span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>In our <code>TodoList</code> component, we now amend our <code>onKeypress</code> function to leverage the service!</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//components/TodoList/TodoList.js
</span><span class=c1></span>
<span class=kr>class</span> <span class=nx>TodoList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>onKeypress</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>key</span> <span class=o>===</span> <span class=s1>&#39;Enter&#39;</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>_onSaveTodo</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
      <span class=p>}</span>
      <span class=k>else</span> <span class=p>{</span>
        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Nothing to do!&#39;</span><span class=p>)</span><span class=p>;</span>
      <span class=p>}</span>
    <span class=p>}</span>
  <span class=p>}</span>

  <span class=nx>async</span> <span class=nx>_onSaveTodo</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kd>let</span> <span class=nx>text</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>text</span><span class=p>;</span>
      <span class=kd>let</span> <span class=nx>todo</span> <span class=o>=</span> <span class=nx>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>createTodo</span><span class=p>(</span><span class=p>{</span><span class=nx>todo</span><span class=o>:</span> <span class=nx>text</span><span class=p>}</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>(</span><span class=nx>s</span><span class=p>=&gt;</span><span class=p>{</span>
        <span class=k>return</span> <span class=p>{</span><span class=nx>todos</span><span class=o>:</span> <span class=p>[</span><span class=p>...</span><span class=nx>s</span><span class=p>.</span><span class=nx>todos</span><span class=p>,</span> <span class=nx>todo</span><span class=p>]</span><span class=p>,</span> <span class=nx>text</span><span class=o>:</span><span class=s1>&#39;&#39;</span><span class=p>}</span><span class=p>;</span>
      <span class=p>}</span><span class=p>)</span>
    <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Error Creating Todo!&#39;</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>Now when you add a Todo&mldr; Explosions Happen! Since we&rsquo;re dealing with objects instead of just text, we need to update our Render function to include a key on the<li>compnent and to display the todo text as opposed to just the {t}.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// app/components/TodoList/TodoList.js
</span><span class=c1></span>
<span class=kr>class</span> <span class=nx>TodoList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>render</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
      <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
        <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;todos&#34;</span><span class=o>&gt;</span>
          <span class=o>&lt;</span><span class=nx>TodoInput</span>
            <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span>
            <span class=nx>placeholder</span><span class=o>=</span><span class=s2>&#34;Add a Todo&#34;</span>
            <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
            <span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>onChange</span><span class=p>}</span>
            <span class=nx>onKeyPress</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>onKeypress</span><span class=p>}</span>
          <span class=o>/</span><span class=o>&gt;</span>
        <span class=o>&lt;</span><span class=err>/</span><span class=err>d</span><span class=err>i</span><span class=err>v</span><span class=err>&gt;</span>
        <span class=o>&lt;</span><span class=nx>ul</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;todo-list&#34;</span><span class=o>&gt;</span>
          <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span>
            <span class=o>&lt;</span><span class=nx>li</span> <span class=nx>key</span> <span class=o>=</span> <span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>_id</span><span class=p>}</span><span class=o>&gt;</span>
              <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;button&#34;</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>onDeleteTodo</span><span class=p>}</span> <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>X</span><span class=o>&lt;</span><span class=err>/</span><span class=err>b</span><span class=err>u</span><span class=err>t</span><span class=err>t</span><span class=err>o</span><span class=err>n</span><span class=err>&gt;</span>
              <span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>todo</span><span class=p>}</span>
            <span class=o>&lt;</span><span class=err>/</span><span class=err>l</span><span class=err>i</span><span class=err>&gt;</span><span class=err>)</span>
          <span class=p>}</span>
        <span class=o>&lt;</span><span class=err>/</span><span class=err>u</span><span class=err>l</span><span class=err>&gt;</span>
      <span class=o>&lt;</span><span class=err>/</span><span class=err>d</span><span class=err>i</span><span class=err>v</span><span class=err>&gt;</span>
    <span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>Once you hit save, you should see your todo pop up. Go ahead and add a few more and you will see it&rsquo;s creating as intended. Hit refresh and you will see that they have been all successfully saved in our API.</p><p>On the same token, we will need to update our <code>onDeleteTodo</code> function to destroy the asset on the server. To do this, we will have to implement the <code>delete</code> function in our <code>Api</code> service and then add a <code>deleteTodo</code> function in our <code>TodoService</code></p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// api/api.service.js
</span><span class=c1></span>
<span class=kr>class</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=k>delete</span><span class=p>(</span><span class=nx>endpoint</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>API_URI</span><span class=o>+</span><span class=nx>endpoint</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>method</span><span class=o>:</span><span class=s1>&#39;DELETE&#39;</span><span class=p>,</span>
      <span class=nx>headers</span><span class=o>:</span> <span class=nx>headers</span>
    <span class=p>}</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>r</span><span class=p>=&gt;</span><span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=p>)</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

<span class=p>}</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// api/todo.service.js
</span><span class=c1></span>
<span class=kr>class</span> <span class=nx>TodoService</span> <span class=kr>extends</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>
  <span class=nx>deleteTodo</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=s1>&#39;todos/&#39;</span><span class=o>+</span><span class=nx>id</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Finally we can update our <code>onDeleteTodo</code> function in our <code>TodoList</code> component.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// components/TodoList/TodoList.js
</span><span class=c1></span>
<span class=nx>onDeleteTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>_onDeleteTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>async</span> <span class=nx>_onDeleteTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kd>let</span> <span class=nx>index</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
      <span class=nx>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>deleteTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>_id</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>(</span><span class=nx>s</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=kd>let</span> <span class=nx>todos</span> <span class=o>=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>todos</span><span class=p>;</span>
        <span class=nx>todos</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span><span class=p>;</span>
        <span class=k>return</span> <span class=p>{</span> <span class=nx>todos</span> <span class=p>}</span>
      <span class=p>}</span><span class=p>)</span>
    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Error Deleting Todo&#39;</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>

</code></pre></div><p>I realize the naming might be a little confusing here, but I don&rsquo;t want to change too much. This still won&rsquo;t work however as we now need to update our render to be able to handle calling this function.</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// components/TodoList/TodoList.js
</span><span class=c1></span>
<span class=nx>render</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>//...
</span><span class=c1></span>  <span class=o>&lt;</span><span class=nx>ul</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;todo-list&#34;</span><span class=o>&gt;</span>
    <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span>
      <span class=o>&lt;</span><span class=nx>li</span> <span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>_id</span><span class=p>}</span><span class=o>&gt;</span>
        <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;button&#34;</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=p>(</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>onDeleteTodo</span><span class=p>(</span><span class=nx>t</span><span class=p>)</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>X</span><span class=o>&lt;</span><span class=err>/</span><span class=err>b</span><span class=err>u</span><span class=err>t</span><span class=err>t</span><span class=err>o</span><span class=err>n</span><span class=err>&gt;</span>
        <span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>todo</span><span class=p>}</span>
      <span class=o>&lt;</span><span class=err>/</span><span class=err>l</span><span class=err>i</span><span class=err>&gt;</span><span class=err>)</span>
    <span class=p>}</span>
  <span class=o>&lt;</span><span class=err>/</span><span class=err>u</span><span class=err>l</span><span class=err>&gt;</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>For fun, we may as well make use of the other endpoints that we made. Let&rsquo;s add a checkbox to our Todos as well! We will handle the checkbox click by updating the Todos completed field.</p><p>Again, we need to implement our API handlers</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// app/api.service.js
</span><span class=c1></span><span class=kr>class</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>put</span><span class=p>(</span><span class=nx>endpoint</span><span class=p>,</span> <span class=nx>body</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>API_URI</span><span class=o>+</span><span class=nx>endpoint</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>method</span><span class=o>:</span><span class=s1>&#39;PUT&#39;</span><span class=p>,</span>
      <span class=nx>headers</span><span class=o>:</span> <span class=nx>headers</span><span class=p>,</span>
      <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>body</span><span class=p>)</span>
    <span class=p>}</span><span class=p>)</span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>r</span><span class=p>=&gt;</span><span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=p>)</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// app/todo.service.js
</span><span class=c1></span><span class=kr>class</span> <span class=nx>TodoService</span> <span class=kr>extends</span> <span class=nx>Api</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>updateTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s1>&#39;todos/&#39;</span><span class=o>+</span><span class=nx>todo</span><span class=p>.</span><span class=nx>_id</span><span class=p>,</span> <span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Then we add some handlers in our <code>TodoList</code> component</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// components/TodoList/TodoList.js
</span><span class=c1></span>
<span class=kr>class</span> <span class=nx>TodoList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Compnent</span> <span class=p>{</span>
  
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>async</span> <span class=nx>_onUpdateTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kd>let</span> <span class=nx>index</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
      <span class=nx>todo</span> <span class=o>=</span> <span class=nx>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>updateTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>(</span><span class=nx>s</span><span class=p>=&gt;</span><span class=p>{</span>
        <span class=kd>let</span> <span class=nx>todos</span> <span class=o>=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>todos</span><span class=p>;</span>
        <span class=nx>todos</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
        <span class=k>return</span> <span class=p>{</span><span class=nx>todos</span><span class=p>}</span><span class=p>;</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Error Updating Todo!&#39;</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>

  <span class=nx>onCheckTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>todo</span><span class=p>.</span><span class=nx>completed</span> <span class=o>=</span> <span class=o>!</span><span class=nx>todo</span><span class=p>.</span><span class=nx>completed</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>_onUpdateTodo</span><span class=p>(</span><span class=nx>todo</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>render</span><span class=p>(</span><span class=p>)</span><span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
      <span class=c1>// ...
</span><span class=c1></span>      <span class=o>&lt;</span><span class=nx>ul</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;todo-list&#34;</span><span class=o>&gt;</span>
          <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span>
            <span class=o>&lt;</span><span class=nx>li</span> <span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>_id</span><span class=p>}</span><span class=o>&gt;</span>
              <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;button&#34;</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=p>(</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>onDeleteTodo</span><span class=p>(</span><span class=nx>t</span><span class=p>)</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>X</span><span class=o>&lt;</span><span class=err>/</span><span class=err>b</span><span class=err>u</span><span class=err>t</span><span class=err>t</span><span class=err>o</span><span class=err>n</span><span class=err>&gt;</span>
              <span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>todo</span><span class=p>}</span>
              <span class=o>&lt;</span><span class=nx>input</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;checkbox&#34;</span> <span class=nx>checked</span> <span class=o>=</span> <span class=p>{</span><span class=nx>t</span><span class=p>.</span><span class=nx>completed</span><span class=p>}</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;todo-checkbox&#34;</span> <span class=nx>onChange</span> <span class=o>=</span> <span class=p>{</span><span class=p>(</span><span class=p>)</span><span class=p>=&gt;</span><span class=k>this</span><span class=p>.</span><span class=nx>onCheckTodo</span><span class=p>(</span><span class=nx>t</span><span class=p>)</span><span class=p>}</span><span class=o>/</span><span class=o>&gt;</span>
            <span class=o>&lt;</span><span class=err>/</span><span class=err>l</span><span class=err>i</span><span class=err>&gt;</span><span class=err>)</span>
          <span class=p>}</span>
        <span class=o>&lt;</span><span class=err>/</span><span class=err>u</span><span class=err>l</span><span class=err>&gt;</span>
      <span class=c1>// ...
</span><span class=c1></span>    <span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

<span class=p>}</span>
</code></pre></div><p>I have some css you can check out in the project&rsquo;s github. I&rsquo;m awful at CSS honestly so I wouldn&rsquo;t suggest taking it too seriously.</p><p>There you have it! A Todo app written in full stack javascript using React.js.</p><p>Next, I&rsquo;ll dabble with authentication and handling it in this app as well. This code will be released under the v0.2 tag in the same github repository as on the top.</p><p>Until Then!</p></article><section class="article labels"><a class=category href=/categories/reactjs/>ReactJS</a><a class=category href=/categories/nodejs/>nodejs</a><a class=tag href=/tags/reactjs/>ReactJS</a><a class=tag href=/tags/nodejs/>nodejs</a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/posts/2018/go-micro-services-and-embedded-databases/><span class="iconfont icon-article"></span>Go - Micro-services and Embedded Databases [Part 1]</a></p><p><a class=link href=/posts/2018/learning-react-with-create-react-app/><span class="iconfont icon-article"></span>Learning React with create-react-app</a></p></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>©2020 James Hughes.</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section></body></html>