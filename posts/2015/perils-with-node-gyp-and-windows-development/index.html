<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Windows, NodeJS, and node-gyp. The Battle and the Conquest | James Hughes</title>
<meta name=keywords content="npm,Node.js,Windows-sdk,node-gyp,javaonnode"><meta name=description content="Update!
It has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach.
See the comments from Cees Timmerman and Mark Pinder in the comments.
Step 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a custom install and include the C++ components.
Step 2: rebuild node-gyp using the following:"><meta name=author content="James D Hughes"><link rel=canonical href=https://blog.jimdhughes.com/posts/2015/perils-with-node-gyp-and-windows-development/><meta name=google-site-verification content="G-0ET0VYDXCL"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.jimdhughes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.jimdhughes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.jimdhughes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.jimdhughes.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.jimdhughes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.jimdhughes.com/posts/2015/perils-with-node-gyp-and-windows-development/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.jimdhughes.com/posts/2015/perils-with-node-gyp-and-windows-development/"><meta property="og:site_name" content="James Hughes"><meta property="og:title" content="Windows, NodeJS, and node-gyp. The Battle and the Conquest"><meta property="og:description" content="Update!
It has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach. See the comments from Cees Timmerman and Mark Pinder in the comments.
Step 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a custom install and include the C++ components.
Step 2: rebuild node-gyp using the following:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-10T05:04:49+00:00"><meta property="article:modified_time" content="2015-04-10T05:04:49+00:00"><meta property="article:tag" content="Npm"><meta property="article:tag" content="Node.js"><meta property="article:tag" content="Windows-Sdk"><meta property="article:tag" content="Node-Gyp"><meta property="article:tag" content="Javaonnode"><meta name=twitter:card content="summary"><meta name=twitter:title content="Windows, NodeJS, and node-gyp. The Battle and the Conquest"><meta name=twitter:description content="Update!
It has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach.
See the comments from Cees Timmerman and Mark Pinder in the comments.
Step 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a custom install and include the C++ components.
Step 2: rebuild node-gyp using the following:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Windows, NodeJS, and node-gyp. The Battle and the Conquest","item":"https://blog.jimdhughes.com/posts/2015/perils-with-node-gyp-and-windows-development/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Windows, NodeJS, and node-gyp. The Battle and the Conquest","name":"Windows, NodeJS, and node-gyp. The Battle and the Conquest","description":"Update!\nIt has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach. See the comments from Cees Timmerman and Mark Pinder in the comments.\nStep 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a custom install and include the C++ components.\nStep 2: rebuild node-gyp using the following:\n","keywords":["npm","Node.js","Windows-sdk","node-gyp","javaonnode"],"articleBody":"Update!\nIt has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach. See the comments from Cees Timmerman and Mark Pinder in the comments.\nStep 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a custom install and include the C++ components.\nStep 2: rebuild node-gyp using the following:\nnpm install -g --msvs_version=2015 node-gyp rebuild The installations should complete now without issue.\nThe original blog entry is below. It still reflects some of my disdain for development in windows if you want to rah-rah around it :-D\nHere’s a depressing fact. Lots of jobs that you’re going to go to are going to strictly regimen Windows Development. Corporations love windows. If you’re not in a start-up, you’re probably going to be expected to work with this disastrous developers experience. To us this translates into a lot of grumbling and then eventual compliance. It will be a valiant fight, but we soon realise that there are hills to die on and this probably isn’t the one.\nIt was a glorious afternoon. I had recently deployed a neato MEAN application (mongo/express/angular/node) and it was running smoothly as could be. Soon, as with any non-contract software development, came the demands. What else can we make this thing do!? So before I knew it, I was generating Jasper Reports and, instead of hosting it on a Jasper Report server and using there Rest_v2, I decided to play with some neato Node libraries and set up an API to get reports instead!\nThis required a neat library that allows you to run Java in Node.js. It’s called …. java. Let’s do it! Pop open my command prompt, navigate to my source code in the development environment\nnpm install java --save Uh Oh!\ngyp ERR! configure error gyp ERR! stack Error: Can't find Python executable \"python\", you can set the PYTHON env variable. Looks like I need python for in order for node-gyp to configure itself. //installs python //tries to install java again WOAH!\nERROR: The system was unable to find the specified registry key or value. Error: Command failed: C:\\\\WINDOWS\\\\system32\\\\cmd.exe /s /c \\\"reg query \\\"hklm\\\\softwa re\\\\wow6432node\\\\javasoft\\\\java development kit\"\" ERROR: The system was unable to find the specified registry key or value. gyp: Call to \\'node findJavaHome.js\\' returned exit status 1. while trying to load binding.gyp gyp ERR! configure error gyp ERR! stack Error: \\`gyp\\` failed with exit code: 1 Looks like I forgot I never actually use the JDK on Windows because.. It’s the JDK on windows. Let’s try this again, shall we? //installs JDK\nnpm install java --save GRAR!\n\u003e node-gyp rebuild C:\\path\\to\\projectnode_modules\\java\u003enode \"C:\\Pro gram Files\\nodejs\\node_modules\\npm\\bin\\node-gyp-bin\\\\..\\..\\node_modules\\node-gyp \\bin\\node-gyp.js\" rebuild Building the projects in this solution one at a time. To enable parallel build, please add the \"/m\" switch. C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppBuild.targets(29 7,5): warning MSB8003: Could not find WindowsSDKDir variable from the registry. TargetFrameworkVersion or PlatformToolset may be set to an invalid version nu mber. [C:\\path\\to\\projectnode_modules\\java\\buil d\\nodejavabridge_bindings.vcxproj] C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Platforms\\x64\\Microsoft.Cpp.x 64.Targets(146,5): error MSB6006: \"CL.exe\" exited with code -1073741515. [C:\\Us ers\\admin_jhughes\\Documents\\project\\node_modules\\java\\build\\nodejavabr idge_bindings.vcxproj] gyp ERR! build error gyp ERR! stack Error: `C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe ` failed with exit code: 1 gyp ERR! stack at ChildProcess.onExit (C:\\Program Files\\nodejs\\node_modules\\ npm\\node_modules\\node-gyp\\lib\\build.js:267:23) gyp ERR! stack at ChildProcess.emit (events.js:98:17) gyp ERR! stack at Process.ChildProcess._handle.onexit (child_process.js:820: 12) gyp ERR! System Windows_NT 6.2.9200 gyp ERR! command \"node\" \"C:\\\\Program Files\\\\nodejs\\\\node_modules\\\\npm\\\\node_modu les\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"rebuild\" gyp ERR! cwd C:\\path\\to\\projectnode_modules\\java gyp ERR! node -v v0.10.36 gyp ERR! node-gyp -v v1.0.1 gyp ERR! not ok npm ERR! java@0.4.6 install: `node-gyp rebuild` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the java@0.4.6 install script. npm ERR! This is most likely a problem with the java package, npm ERR! not with npm itself. npm ERR! Tell the author that this fails on your system: npm ERR! node-gyp rebuild npm ERR! You can get their info via: npm ERR! npm owner ls java npm ERR! There is likely additional logging output above. npm ERR! System Windows_NT 6.2.9200 npm ERR! command \"C:\\\\Program Files\\\\nodejs\\\\\\\\node.exe\" \"C:\\\\Program Files\\\\nod ejs\\\\node_modules\\\\npm\\\\bin\\\\npm-cli.js\" \"install\" \"java\" \"--save\" npm ERR! cwd C:\\Users\\admin_jhughes\\Documents\\project npm ERR! node -v v0.10.36 npm ERR! npm -v 1.4.28 npm ERR! code ELIFECYCLE npm ERR! not ok code 0 Here’s where we get the suck. It caused me plenty of grief and here was my step for finding a solution.\n######1. Compilers. I’ve become so used to my sudo apt-get install build-essential that when I first experienced the requirements for Microsofts Visual Studio and C++ redistributables being required to compile C code that I felt my heart sink immensely. I don’t WANT to install visual studio. I don’t WANT to fight over which version of C++ redistributable packages I’m supposed to use. I don’t WANT to program on Windows. But I did anyways. I tried installing Visual Studio 2013… to no avail. So I tried Visual Studio 2010 … to no avail. I decided to just try the C++ Redistributable library… to no avail.\nHere’s where I started getting annoyed and had to dig into the depths of some random forums. It turns out that It wasn’t the compiler and the error messages that were generated by npm really just lead me on a wild goose chase.\nRealizing that this is already getting too wordy, I’ll cut right to it. My issue was: Windows x64, Node x86. Bazing. I had to download the windows sdk in order to get node-gyp to run. Install it, then execute the following code to get your console into a compatibility mode.\n\"C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\bin\\SetEnv.CMD\" /Release /x64 All my text went green then I could execute\nnpm install java --save and after a bunch of scary looking text, hazah I’ve got Java installed on NPM. After the libraries were installed I could start my Node server with no issues.\n","wordCount":"968","inLanguage":"en","datePublished":"2015-04-10T05:04:49Z","dateModified":"2015-04-10T05:04:49Z","author":{"@type":"Person","name":"James D Hughes"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.jimdhughes.com/posts/2015/perils-with-node-gyp-and-windows-development/"},"publisher":{"@type":"Organization","name":"James Hughes","logo":{"@type":"ImageObject","url":"https://blog.jimdhughes.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.jimdhughes.com/ accesskey=h title="James Hughes (Alt + H)">James Hughes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Windows, NodeJS, and node-gyp. The Battle and the Conquest</h1><div class=post-meta><span title='2015-04-10 05:04:49 +0000 UTC'>April 10, 2015</span>&nbsp;·&nbsp;James D Hughes</div></header><div class=post-content><p><strong>Update!</strong></p><p>It has been brought to my attention that there is a another way to fix this solution that seems a bit simpler than my original approach.
See the comments from Cees Timmerman and Mark Pinder in the comments.</p><p>Step 1: Install Visual Studio community edition (2015 seems to be tried, tested and true). Ensure that you do a <em>custom</em> install and include the <strong>C++</strong> components.</p><p>Step 2: rebuild node-gyp using the following:</p><pre tabindex=0><code>npm install -g --msvs_version=2015 node-gyp rebuild
</code></pre><p>The installations should complete now without issue.</p><p>The original blog entry is below. It still reflects some of my disdain for development in windows if you want to rah-rah around it :-D</p><hr><p>Here&rsquo;s a depressing fact.
Lots of jobs that you&rsquo;re going to go to are going to strictly regimen Windows Development. Corporations love windows. If you&rsquo;re not in a start-up, you&rsquo;re probably going to be expected to work with this disastrous developers experience.
To us this translates into a lot of grumbling and then eventual compliance. It will be a valiant fight, but we soon realise that there are hills to die on and this probably isn&rsquo;t the one.</p><p>It was a glorious afternoon. I had recently deployed a neato MEAN application (mongo/express/angular/node) and it was running smoothly as could be. Soon, as with any non-contract software development, came the demands. What else can we make this thing do!?
So before I knew it, I was generating Jasper Reports and, instead of hosting it on a Jasper Report server and using there Rest_v2, I decided to play with some neato Node libraries and set up an API to get reports instead!</p><p>This required a neat library that allows you to run Java in Node.js. It&rsquo;s called &mldr;. java.
Let&rsquo;s do it! Pop open my command prompt, navigate to my source code in the development environment</p><pre tabindex=0><code>npm install java --save
</code></pre><p>Uh Oh!</p><pre tabindex=0><code>gyp ERR! configure error
gyp ERR! stack Error: Can&#39;t find Python executable &#34;python&#34;, you can set the PYTHON env variable.
</code></pre><p>Looks like I need python for in order for node-gyp to configure itself.
//installs python
//tries to install java again
WOAH!</p><pre tabindex=0><code>ERROR: The system was unable to find the specified registry key or value.

Error: Command failed: C:\\WINDOWS\\system32\\cmd.exe /s /c \&#34;reg query \&#34;hklm\\softwa
re\\wow6432node\\javasoft\\java development kit&#34;&#34;
ERROR: The system was unable to find the specified registry key or value.

gyp: Call to \&#39;node findJavaHome.js\&#39; returned exit status 1. while trying to load
 binding.gyp
gyp ERR! configure error
gyp ERR! stack Error: \`gyp\` failed with exit code: 1
</code></pre><p>Looks like I forgot I never actually use the JDK on Windows because.. It&rsquo;s the JDK on windows.
Let&rsquo;s try this again, shall we?
//installs JDK</p><pre tabindex=0><code>npm install java --save
</code></pre><p>GRAR!</p><pre tabindex=0><code>&gt; node-gyp rebuild

C:\path\to\projectnode_modules\java&gt;node &#34;C:\Pro
gram Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp
\bin\node-gyp.js&#34; rebuild
Building the projects in this solution one at a time. To enable parallel build,
please add the &#34;/m&#34; switch.
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(29
7,5): warning MSB8003: Could not find WindowsSDKDir variable from the registry.
  TargetFrameworkVersion or PlatformToolset may be set to an invalid version nu
mber. [C:\path\to\projectnode_modules\java\buil
d\nodejavabridge_bindings.vcxproj]
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp.x
64.Targets(146,5): error MSB6006: &#34;CL.exe&#34; exited with code -1073741515. [C:\Us
ers\admin_jhughes\Documents\project\node_modules\java\build\nodejavabr
idge_bindings.vcxproj]
gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe
` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onExit (C:\Program Files\nodejs\node_modules\
npm\node_modules\node-gyp\lib\build.js:267:23)
gyp ERR! stack     at ChildProcess.emit (events.js:98:17)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:820:
12)
gyp ERR! System Windows_NT 6.2.9200
gyp ERR! command &#34;node&#34; &#34;C:\\Program Files\\nodejs\\node_modules\\npm\\node_modu
les\\node-gyp\\bin\\node-gyp.js&#34; &#34;rebuild&#34;
gyp ERR! cwd C:\path\to\projectnode_modules\java

gyp ERR! node -v v0.10.36
gyp ERR! node-gyp -v v1.0.1
gyp ERR! not ok

npm ERR! java@0.4.6 install: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the java@0.4.6 install script.
npm ERR! This is most likely a problem with the java package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls java
npm ERR! There is likely additional logging output above.
npm ERR! System Windows_NT 6.2.9200
npm ERR! command &#34;C:\\Program Files\\nodejs\\\\node.exe&#34; &#34;C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js&#34; &#34;install&#34; &#34;java&#34; &#34;--save&#34;
npm ERR! cwd C:\Users\admin_jhughes\Documents\project
npm ERR! node -v v0.10.36
npm ERR! npm -v 1.4.28
npm ERR! code ELIFECYCLE
npm ERR! not ok code 0
</code></pre><p>Here&rsquo;s where we get the suck. It caused me plenty of grief and here was my step for finding a solution.</p><p>######1. Compilers.
I&rsquo;ve become so used to my <code>sudo apt-get install build-essential</code> that when I first experienced the requirements for Microsofts Visual Studio and C++ redistributables being required to compile C code that I felt my heart sink immensely.
I don&rsquo;t WANT to install visual studio.
I don&rsquo;t WANT to fight over which version of C++ redistributable packages I&rsquo;m supposed to use.
I don&rsquo;t WANT to program on Windows.
But I did anyways. I tried installing Visual Studio 2013&mldr; to no avail. So I tried Visual Studio 2010 &mldr; to no avail.
I decided to just try the C++ Redistributable library&mldr; to no avail.</p><p>Here&rsquo;s where I started getting annoyed and had to dig into the depths of some random forums. It turns out that It wasn&rsquo;t the compiler and the error messages that were generated by npm really just lead me on a wild goose chase.</p><p>Realizing that this is already getting too wordy, I&rsquo;ll cut right to it.
My issue was: Windows x64, Node x86.
Bazing.
I had to download the <a href="http://www.microsoft.com/en-ca/download/details.aspx?id=3138">windows sdk</a> in order to get node-gyp to run.
Install it, then execute the following code to get your console into a compatibility mode.</p><pre tabindex=0><code>&#34;C:\Program Files\Microsoft SDKs\Windows\v7.1\bin\SetEnv.CMD&#34; /Release /x64
</code></pre><p>All my text went green then I could execute</p><pre tabindex=0><code>npm install java --save
</code></pre><p>and after a bunch of scary looking text, hazah I&rsquo;ve got Java installed on NPM. After the libraries were installed I could start my Node server with no issues.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.jimdhughes.com/tags/npm/>Npm</a></li><li><a href=https://blog.jimdhughes.com/tags/node.js/>Node.js</a></li><li><a href=https://blog.jimdhughes.com/tags/windows-sdk/>Windows-Sdk</a></li><li><a href=https://blog.jimdhughes.com/tags/node-gyp/>Node-Gyp</a></li><li><a href=https://blog.jimdhughes.com/tags/javaonnode/>Javaonnode</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.jimdhughes.com/>James Hughes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>