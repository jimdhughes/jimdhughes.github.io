<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Angular + ESRI = Not bad | James Hughes</title>
<meta name=keywords content><meta name=description content="There&rsquo;s no question that I&rsquo;m an ng fanboy.
React&rsquo;s willy nilly do whatever you want attitude doesn&rsquo;t do much for me.
Vue is basically react. Let&rsquo;s be serious.
I like the clear separation of my HTML, CSS, TS, and unit tests. That won&rsquo;t ever go away.   Work has taken me into some new territories where I didn&rsquo;t think I&rsquo;d have as much fun as I am. That&rsquo;s enough of my ranting about javascript frameworks. Let&rsquo;s dive into the root of the article!"><meta name=author content="James D Hughes"><link rel=canonical href=https://blog.jimdhughes.com/posts/2019/angular-esri-not-bad/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.jimdhughes.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.jimdhughes.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.jimdhughes.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.jimdhughes.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.jimdhughes.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.jimdhughes.com/posts/2019/angular-esri-not-bad/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.jimdhughes.com/posts/2019/angular-esri-not-bad/"><meta property="og:site_name" content="James Hughes"><meta property="og:title" content="Angular + ESRI = Not bad"><meta property="og:description" content="There’s no question that I’m an ng fanboy.
React’s willy nilly do whatever you want attitude doesn’t do much for me.
Vue is basically react. Let’s be serious.
I like the clear separation of my HTML, CSS, TS, and unit tests. That won’t ever go away. Work has taken me into some new territories where I didn’t think I’d have as much fun as I am. That’s enough of my ranting about javascript frameworks. Let’s dive into the root of the article!"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-06T09:33:18+00:00"><meta property="article:modified_time" content="2019-09-06T09:33:18+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Angular + ESRI = Not bad"><meta name=twitter:description content="There&rsquo;s no question that I&rsquo;m an ng fanboy.
React&rsquo;s willy nilly do whatever you want attitude doesn&rsquo;t do much for me.
Vue is basically react. Let&rsquo;s be serious.
I like the clear separation of my HTML, CSS, TS, and unit tests. That won&rsquo;t ever go away.   Work has taken me into some new territories where I didn&rsquo;t think I&rsquo;d have as much fun as I am. That&rsquo;s enough of my ranting about javascript frameworks. Let&rsquo;s dive into the root of the article!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Angular + ESRI = Not bad","item":"https://blog.jimdhughes.com/posts/2019/angular-esri-not-bad/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Angular + ESRI = Not bad","name":"Angular \u002b ESRI = Not bad","description":"There\u0026rsquo;s no question that I\u0026rsquo;m an ng fanboy.\nReact\u0026rsquo;s willy nilly do whatever you want attitude doesn\u0026rsquo;t do much for me.\nVue is basically react. Let\u0026rsquo;s be serious.\nI like the clear separation of my HTML, CSS, TS, and unit tests. That won\u0026rsquo;t ever go away. Work has taken me into some new territories where I didn\u0026rsquo;t think I\u0026rsquo;d have as much fun as I am. That\u0026rsquo;s enough of my ranting about javascript frameworks. Let\u0026rsquo;s dive into the root of the article!\n","keywords":[],"articleBody":"There’s no question that I’m an ng fanboy.\nReact’s willy nilly do whatever you want attitude doesn’t do much for me.\nVue is basically react. Let’s be serious.\nI like the clear separation of my HTML, CSS, TS, and unit tests. That won’t ever go away. Work has taken me into some new territories where I didn’t think I’d have as much fun as I am. That’s enough of my ranting about javascript frameworks. Let’s dive into the root of the article!\nIf you don’t feel like reading below, the code is up on my github. Check it out at https://github.com/jimdhughes/jdhc-esri-starter\nIf you feel like following along with some code and some possible random side stories, follow along!\nSince I value productivity over feeling clever, I’m going to use the angluar cli. I hope you have it installed too. We’re going to use Angular v8. I typically add routing and use SCSS but feel free to make it your own.\nng new esri-app I absolutely LOVE the Angular team’s Material libraries as well as the flex-layout library, so those are the FIRST things that I install. Being a proponent of functional, performant and quick to develop, I have no problem admitting that I’d prefer to use some angular directives over writing CSS. You can read the official documentation over at https://material.angular.io/guide/getting-started and https://github.com/angular/flex-layout or you can just do what I tell you below.\ncd esri-app npm install --save @angular/material @angular/cdk @angular/animations @angular/flex-layout After waiting a few minutes, you need to add some things into your app.module.ts file.\n// ... Some imports import { BrowserAnimationsModule } from '@angular/platform-browser/animations'; @NgModule({ declarations: [], imports: [ BrowserModule, BrowserAnimationsModule, AppRoutingModule, ], entryComponents: [], providers: [], bootstrap: [AppComponent] }) export class AppModule {} I have no shame in importing the entire angular material library into a helper module, especially when I don’t expect the app to ever make it past my desktop or workstation. There’s something to be said about just having everything up front then optimizing when you have to. So we’re going to use the stackblitz template that google provides but I’ll use the CLI to make live a bit more structured.\nng g m material Now you’ll have to edit your material.module.ts file to include all the material directives as well as the flex-layout directives.\n// src/app/material/material.module.ts import { NgModule } from '@angular/core'; import { CommonModule } from '@angular/common'; import { A11yModule } from '@angular/cdk/a11y'; import { BidiModule } from '@angular/cdk/bidi'; import { ObserversModule } from '@angular/cdk/observers'; import { OverlayModule } from '@angular/cdk/overlay'; import { PlatformModule } from '@angular/cdk/platform'; import { PortalModule } from '@angular/cdk/portal'; import { ScrollingModule } from '@angular/cdk/scrolling'; import { CdkStepperModule } from '@angular/cdk/stepper'; import { CdkTableModule } from '@angular/cdk/table'; import { CdkTreeModule } from '@angular/cdk/tree'; import { MatAutocompleteModule, MatBadgeModule, MatBottomSheetModule, MatButtonModule, MatButtonToggleModule, MatCardModule, MatCheckboxModule, MatChipsModule, MatDatepickerModule, MatDialogModule, MatDividerModule, MatExpansionModule, MatFormFieldModule, MatGridListModule, MatIconModule, MatInputModule, MatListModule, MatMenuModule, MatNativeDateModule, MatPaginatorModule, MatProgressBarModule, MatProgressSpinnerModule, MatRadioModule, MatRippleModule, MatSelectModule, MatSidenavModule, MatSliderModule, MatSlideToggleModule, MatSnackBarModule, MatSortModule, MatStepperModule, MatTableModule, MatTabsModule, MatToolbarModule, MatTooltipModule, MatTreeModule, } from '@angular/material'; import { FlexLayoutModule } from '@angular/flex-layout'; @NgModule({ declarations: [], imports: [ CommonModule ], exports: [ // CDK A11yModule, BidiModule, ObserversModule, OverlayModule, PlatformModule, PortalModule, ScrollingModule, CdkStepperModule, CdkTableModule, CdkTreeModule, // Material MatAutocompleteModule, MatBadgeModule, MatBottomSheetModule, MatButtonModule, MatButtonToggleModule, MatCardModule, MatCheckboxModule, MatChipsModule, MatDatepickerModule, MatDialogModule, MatDividerModule, MatExpansionModule, MatFormFieldModule, MatGridListModule, MatIconModule, MatInputModule, MatListModule, MatMenuModule, MatNativeDateModule, MatPaginatorModule, MatProgressBarModule, MatProgressSpinnerModule, MatRadioModule, MatRippleModule, MatSelectModule, MatSidenavModule, MatSliderModule, MatSlideToggleModule, MatSnackBarModule, MatSortModule, MatStepperModule, MatTableModule, MatTabsModule, MatToolbarModule, MatTooltipModule, MatTreeModule, // Flex FlexLayoutModule, ] }) export class MaterialModule { } /** Copyright 2019 Google Inc. All Rights Reserved. Use of this source code is governed by an MIT-style license that can be found in the LICENSE file at http://angular.io/license */ ^ That ought to pad my word count. I included the copyright because that's just good juju for this guy. Now that we've got this delightful helper set up. Import it into your `app.module.ts` file to expose it to this module of your app! I'm not going to copy the code block. Just go do it. Next piece of prep is to add icons to my `index.html`... ```html Then import a theme into styles.scss\n@import \"~@angular/material/prebuilt-themes/indigo-pink.css\"; Sure. That looks pretty good.\nNow that all that is out of the way. Make sure it works by deleting almost everything in your app.component.html and give it a toolbar.\n\u003cmat-toolbar color=\"primary\"\u003e Esri Starter \u003c/mat-toolbar\u003e \u003crouter-outlet\u003e\u003c/router-outlet\u003e Start up the app with ng serve and check out the magic!\nThis is the time I realized that the computer I was writing my blog on was running Angular CLI v7 and I installed all v8 dependencies.. so here we go upgrading.. ng update @angular/cli @angular/core Yeah. It’s only that easy because we haven’t done anything yet. You can read their upgrade guides over at https://update.angular.io/#7.0:8.0 though.\nAfter a short blip.. here we go again! - Your app should be running now.\nThose annoying margins! I forgot about my trusty angular scss defaults!\nhtml, body { height: 100%; width: 100%; margin: 0; } router-outlet.router-flex + * { display: flex; flex: 1 1 auto; flex-direction: column; } That router-outlet stuff is a bonus for you later - if you’ve worked with these angular router and couldn’t get the children to fill the height, you’ll like it.\nALRIGHT! Enough already - let’s get to the ESRI stuff!\nFirst we need to install some more libraries.. esri-loader for importing the annoying dojo components and @types/arcgis-js-api for … types\nnpm install --save esri-loader @types/arcgis-js-api Update your tsconfig.app.json to include the esri typings\n{ \"extends\": \"../tsconfig.json\", \"compilerOptions\": { \"outDir\": \"../out-tsc/app\", \"types\": [\"arcgis-js-api\"] }, \"exclude\": [\"test.ts\", \"**/*.spec.ts\"] } You should also add the esri styles to your index.html. We’re using 4.12 for this article. Upgrade if you need to.\n\u003chead\u003e \u003clink rel=\"stylesheet\" href=\"https://js.arcgis.com/4.12/esri/css/main.css\"\u003e \u003c/head\u003e Now to build the Arcmap component. You guessed it. Another CLI command\nng g c arcmap Then we add it into our AppComponent. Since I like maps so much, I’m going to make it the focal point of my app. Here is some code to make a generic sidenav component.\n\u003cdiv fxLayout=\"row\" fxFlexFill\u003e \u003cmat-drawer-container class=\"example-container\" fxLayout=\"column\" fxFlex\u003e \u003cmat-drawer mode=\"side\" [opened]=\"true\" class=\"app-sidenav\"\u003e \u003cmat-card\u003e A Card! \u003c/mat-card\u003e \u003c/mat-drawer\u003e \u003cmat-drawer-content fxLayout=\"column\"\u003e \u003cmat-toolbar fxLayout=\"row\" color=\"primary\"\u003e \u003cbutton mat-icon-button (click)=\"onMenuToggle()\"\u003e \u003cmat-icon\u003emenu\u003c/mat-icon\u003e \u003c/button\u003e \u003ch3\u003eESRI Starter\u003c/h3\u003e \u003c/mat-toolbar\u003e \u003cdiv fxFlex fxLayout=\"row\"\u003e \u003crouter-outlet\u003e\u003c/router-outlet\u003e \u003capp-arcmap fxFlex\u003e\u003c/app-arcmap\u003e \u003c/div\u003e \u003c/mat-drawer-content\u003e \u003c/mat-drawer-container\u003e \u003c/div\u003e I added a class to app.component.scss to make my sidenav a little more sidenavy\n.app-sidenav { width: 250px; } Refresh your app and you’ll see a side menu with a card, and a component that just says arcmap works! Congrats!\nNow for the fun stuff! Below is legit all you’ll need to render that map.\n\u003cdiv class=\"mapview\" #arcmap\u003e \u003c/div\u003e … Eventualy.\nWe need to do some magic in the typescript file still! Let’s import things and set up our viewchild.\nimport { Component, OnInit, ViewChild, ElementRef, HostListener } from \"@angular/core\"; import { loadModules } from \"esri-loader\"; import esri = __esri; @Component({ selector: \"app-arcmap\", templateUrl: \"./arcmap.component.html\", styleUrls: [\"./arcmap.component.scss\"] }) export class ArcmapComponent implements OnInit { @ViewChild(\"arcmap\", { static: false }) private arcMapRef: ElementRef; mapView: esri.MapView; map: esri.Map; constructor() {} ngOnInit() { } } Still not broken!\nNow let’s init the map.\nngOnInit() { this.init(); } async init() { try { const [Map, MapView] = (await loadModules([ \"esri/Map\", \"esri/views/MapView\" ])) as [esri.MapConstructor, esri.MapViewConstructor]; this.map = new Map({ basemap: \"dark-gray\" }); this.mapView = new MapView({ map: this.map, center: [-113.4909, 53.544], zoom: 12, container: this.arcMapRef.nativeElement, ui: { components: [\"attribution\"] } }); } catch (e) { console.error(e); } } I call another init because I like async/await and the lifecycle hooks yell at me when I throw an async in front of them. This just makes life a bit easier.\nHit save and you see …\n#NOTHING!\nThis is because that div is very small. There is nothing HTMLy in it so it’s tiny. We can fix that with some scss in arcmap.component.scss\n.mapview { height: 100%; width:100%; overflow: hidden; } .ng-star-inserted { height: 100% } Pow. You have an ESRI map sitting in your Angular app. It’s centered on Edmonton because that’s where I’m from. Update the lat/lon in the init code to set it on your city if you’re so interested.\nNow is as good a time as any to add in a service for managing the state of our Map. To do this, I like to create a services module\nng g m services\nng g s services/arcmap\nI decided that all I really want to do for my app is to set the center and zoom levels because really, what’s a map that doesn’t move around and zoom?\nInside of src/services/arcmap.service.ts…\nimport { Injectable, EventEmitter, Output } from '@angular/core'; export interface Point { lon: number; lat: number; } @Injectable({ providedIn: 'root' }) export class ArcmapService { private mapZoom = 12; private mapCenter: Point = { lat: -113.4909, lon: 53.544 }; esriCenter: Point = { lat: -113.4909, lon: 53.544 }; esriZoom = 12; @Output() zoomEmitter: EventEmitter\u003cnumber\u003e = new EventEmitter\u003cnumber\u003e(); @Output() centerEmitter: EventEmitter\u003cPoint\u003e = new EventEmitter\u003cPoint\u003e(); constructor() {} setCenter(p: Point) { this.mapCenter = p; this.centerEmitter.next(this.mapCenter); } get center() { return this.mapCenter; } setZoom(z: number) { this.mapZoom = z; this.zoomEmitter.next(this.mapZoom); } get zoom() { return this.mapZoom; } setEsriZoom(zoom: number) { this.esriZoom = zoom; } setEsriCenter(point: Point) { this.esriCenter = point; } } Super easy. An interface for an x/y coordinate, a number for a zoom level, and a center of the previous interface for an x/y coordinate.\nNext we’ll add some listeners to our arcmap.component.ts\nimport { Component, OnInit, ViewChild, ElementRef } from '@angular/core'; import { loadModules } from 'esri-loader'; import esri = __esri; import { ArcmapService, Point } from '../services/arcmap.service'; @Component({ selector: 'app-arcmap', templateUrl: './arcmap.component.html', styleUrls: ['./arcmap.component.scss'] }) export class ArcmapComponent implements OnInit { @ViewChild('arcmap', { static: false }) private arcMapRef: ElementRef; mapView: esri.MapView; map: esri.Map; constructor(private arcMapService: ArcmapService) {} ngOnInit() { this.init(); this.arcMapService.zoomEmitter.subscribe((zoom: number) =\u003e { console.log('settnig zoom: ' + zoom); this.mapView.zoom = zoom; }); this.arcMapService.centerEmitter.subscribe((center: Point) =\u003e { if (this.mapView.center.latitude !== center.lat || this.mapView.center.longitude !== center.lon) { this.mapView.goTo({ center: [center.lon, center.lat] }); } }); } async initWidgets() { const [Search, BasemapGallery, Expand, Locate] = await loadModules([ 'esri/widgets/Search', 'esri/widgets/BasemapGallery', 'esri/widgets/Expand', 'esri/widgets/Locate' ]); const locateWidget = new Locate({ view: this.mapView }); const basemapWidget = new BasemapGallery({ view: this.mapView }); const searchWidget = new Search({ view: this.mapView }); this.mapView.ui.add(new Expand({ view: this.mapView, content: searchWidget }), 'top-right'); this.mapView.ui.add(new Expand({ view: this.mapView, content: basemapWidget }), 'top-right'); this.mapView.ui.add(locateWidget, 'top-right'); } async init() { try { const [Map, MapView] = await loadModules(['esri/Map', 'esri/views/MapView']); this.map = new Map({ basemap: 'hybrid' }); this.mapView = new MapView({ map: this.map, center: [-113.4909, 53.544], zoom: 12, container: this.arcMapRef.nativeElement, ui: { components: ['attribution'] } }); this.mapView.when(async () =\u003e { this.initWidgets(); }); } catch (e) { console.error(e); } } } In the ngOnInit we set up all our listeners to our map service including how to react to the events along with some quality of life updates for initializing some widgets and the like.\nI guess it’s about now that I should prove to you that this thing works hey…\nI’m going to do this by making my app take you to a bunch of Canadian sports centers organized by city.\nUnder app.component.ts we’ll need to add some data and a function to handle a click of this new data. Here you go, a component is born:\nimport { Component } from '@angular/core'; import { ArcmapService } from './services/arcmap.service'; @Component({ selector: 'app-root', templateUrl: './app.component.html', styleUrls: ['./app.component.scss'] }) export class AppComponent { title = 'esri-app'; isMenuOpen = true; navItems = [ { title: 'Calgary', locations: [ { title: 'Saddledome', location: { lat: 51.0374336, lon: -114.0519341 }, zoom: 18 }, { title: 'McMahon Stadium', location: { lat: 51.0703813, lon: -114.1214653 }, zoom: 18 } ] }, { title: 'Edmonton', locations: [ { title: 'Rogers Place', location: { lat: 53.5469828, lon: -113.4979082 }, zoom: 19 }, { title: 'Commonwealth Stadium', location: { lat: 53.5596184, lon: -113.4761666 }, zoom: 19 } ] }, { title: 'Toronto', locations: [ { title: 'Scotiabank Arena', location: { lat: 43.6434661, lon: -79.3790989 }, zoom: 20 }, { title: 'BMO Field', location: { lat: 43.6332247, lon: -79.4185654 }, zoom: 20 } ] }, { title: 'Vancouver', locations: [ { title: 'Rogers Arena', location: { lat: 49.2778358, lon: -123.1088227 }, zoom: 21 }, { title: 'BC Place', location: { lat: 49.27675, lon: -123.111999 }, zoom: 21 } ] } ]; constructor(private service: ArcmapService) {} onMenuToggle() { this.isMenuOpen = !this.isMenuOpen; } onGotoLocation(location: { lat: number; lon: number }, zoom: number) { this.service.setZoom(zoom); this.service.setCenter(location); } } Next to update the template to be useful\n\u003cdiv fxLayout=\"row\" fxFlexFill\u003e \u003cmat-drawer-container class=\"example-container\" fxLayout=\"column\" fxFlex\u003e \u003cmat-drawer mode=\"side\" [opened]=\"isMenuOpen\" class=\"app-sidenav\"\u003e \u003cmat-card\u003e \u003cmat-card-title\u003eSports Venues\u003c/mat-card-title\u003e \u003cmat-card-subtitle\u003eA small list\u003c/mat-card-subtitle\u003e \u003c/mat-card\u003e \u003cmat-nav-list dense\u003e \u003cspan *ngFor=\"let i of navItems\"\u003e \u003ch3 matSubheader\u003e{{ i.title }}\u003c/h3\u003e \u003ca mat-list-item *ngFor=\"let n of i.locations\" (click)=\"onGotoLocation(n.location, n.zoom)\"\u003e {{ n.title }} \u003c/a\u003e \u003c/span\u003e \u003c/mat-nav-list\u003e \u003c/mat-drawer\u003e \u003cmat-drawer-content fxLayout=\"column\"\u003e \u003cmat-toolbar fxLayout=\"row\" color=\"primary\"\u003e \u003cbutton mat-icon-button (click)=\"onMenuToggle()\"\u003e \u003cmat-icon\u003emenu\u003c/mat-icon\u003e \u003c/button\u003e \u003ch3\u003eESRI Starter\u003c/h3\u003e \u003c/mat-toolbar\u003e \u003cdiv fxFlex fxLayout=\"row\"\u003e \u003cdiv class=\"floating-panel\"\u003e \u003crouter-outlet\u003e\u003c/router-outlet\u003e \u003c/div\u003e \u003capp-arcmap fxFlex\u003e\u003c/app-arcmap\u003e \u003c/div\u003e \u003c/mat-drawer-content\u003e \u003c/mat-drawer-container\u003e \u003c/div\u003e Go ahead and refresh the app and you can browse some of Canada’s finest sports locales!\nMy short time working with the ArcGIS JavaScript API has been an interesting one. It’s impressively powerful and transitioned my opinions on GIS from ‘So it’s a map with some lines’ to ‘LOOK AT ALL THE COOL THINGS’.\nThe code on github has some more little knick-knacks added in. Feel free to explore and as questions! Especially around why I track two different map zoom levels and extents ;)\n","wordCount":"2234","inLanguage":"en","datePublished":"2019-09-06T09:33:18Z","dateModified":"2019-09-06T09:33:18Z","author":{"@type":"Person","name":"James D Hughes"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.jimdhughes.com/posts/2019/angular-esri-not-bad/"},"publisher":{"@type":"Organization","name":"James Hughes","logo":{"@type":"ImageObject","url":"https://blog.jimdhughes.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.jimdhughes.com/ accesskey=h title="James Hughes (Alt + H)">James Hughes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Angular + ESRI = Not bad</h1><div class=post-meta><span title='2019-09-06 09:33:18 +0000 UTC'>September 6, 2019</span>&nbsp;·&nbsp;James D Hughes</div></header><div class=post-content><p>There&rsquo;s no question that I&rsquo;m an ng fanboy.</p><p>React&rsquo;s willy nilly do whatever you want attitude doesn&rsquo;t do much for me.</p><p>Vue is basically react. Let&rsquo;s be serious.</p><p>I like the clear separation of my HTML, CSS, TS, and unit tests. That won&rsquo;t ever go away. Work has taken me into some new territories where I didn&rsquo;t think I&rsquo;d have as much fun as I am. That&rsquo;s enough of my ranting about javascript frameworks. Let&rsquo;s dive into the root of the article!</p><p>If you don&rsquo;t feel like reading below, the code is up on my github. Check it out at <a href=https://github.com/jimdhughes/jdhc-esri-starter>https://github.com/jimdhughes/jdhc-esri-starter</a></p><p>If you feel like following along with some code and some possible random side stories, follow along!</p><p>Since I value productivity over feeling clever, I&rsquo;m going to use the angluar cli. I hope you have it installed too. We&rsquo;re going to use Angular v8. I typically add routing and use SCSS but feel free to make it your own.</p><pre tabindex=0><code class=language-terminal data-lang=terminal>ng new esri-app
</code></pre><p>I absolutely LOVE the Angular team&rsquo;s Material libraries as well as the flex-layout library, so those are the FIRST things that I install. Being a proponent of functional, performant and quick to develop, I have no problem admitting that I&rsquo;d prefer to use some angular directives over writing CSS. You can read the official documentation over at <a href=https://material.angular.io/guide/getting-started>https://material.angular.io/guide/getting-started</a> and <a href=https://github.com/angular/flex-layout>https://github.com/angular/flex-layout</a> or you can just do what I tell you below.</p><pre tabindex=0><code class=language-terminal data-lang=terminal>cd esri-app
npm install --save @angular/material @angular/cdk @angular/animations @angular/flex-layout
</code></pre><p>After waiting a few minutes, you need to add some things into your <code>app.module.ts</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// ... Some imports
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>BrowserAnimationsModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/platform-browser/animations&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@NgModule</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>declarations</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BrowserModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BrowserAnimationsModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>AppRoutingModule</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entryComponents</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providers</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bootstrap</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>AppComponent</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppModule</span> {}
</span></span></code></pre></div><p>I have no shame in importing the entire angular material library into a helper module, especially when I don&rsquo;t expect the app to ever make it past my desktop or workstation. There&rsquo;s something to be said about just having everything up front then optimizing when you have to. So we&rsquo;re going to use the stackblitz template that google provides but I&rsquo;ll use the CLI to make live a bit more structured.</p><pre tabindex=0><code class=language-terminal data-lang=terminal>ng g m material
</code></pre><p>Now you&rsquo;ll have to edit your <code>material.module.ts</code> file to include all the material directives as well as the flex-layout directives.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/app/material/material.module.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>NgModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CommonModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/common&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>A11yModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/a11y&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>BidiModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/bidi&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ObserversModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/observers&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>OverlayModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/overlay&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>PlatformModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/platform&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>PortalModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/portal&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ScrollingModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/scrolling&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CdkStepperModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/stepper&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CdkTableModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/table&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CdkTreeModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/cdk/tree&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatAutocompleteModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatBadgeModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatBottomSheetModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatButtonModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatButtonToggleModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatCardModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatCheckboxModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatChipsModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatDatepickerModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatDialogModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatDividerModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatExpansionModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatFormFieldModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatGridListModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatIconModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatInputModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatListModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatMenuModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatNativeDateModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatPaginatorModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatProgressBarModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatProgressSpinnerModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatRadioModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatRippleModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSelectModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSidenavModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSliderModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSlideToggleModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSnackBarModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatSortModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatStepperModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatTableModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatTabsModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatToolbarModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatTooltipModule</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>MatTreeModule</span>,
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/material&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FlexLayoutModule</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/flex-layout&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@NgModule</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>declarations</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>CommonModule</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>exports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// CDK
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>A11yModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BidiModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ObserversModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>OverlayModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>PlatformModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>PortalModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ScrollingModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>CdkStepperModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>CdkTableModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>CdkTreeModule</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Material
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>MatAutocompleteModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatBadgeModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatBottomSheetModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatButtonModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatButtonToggleModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatCardModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatCheckboxModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatChipsModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatDatepickerModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatDialogModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatDividerModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatExpansionModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatFormFieldModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatGridListModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatIconModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatInputModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatListModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatMenuModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatNativeDateModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatPaginatorModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatProgressBarModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatProgressSpinnerModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatRadioModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatRippleModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSelectModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSidenavModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSliderModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSlideToggleModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSnackBarModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatSortModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatStepperModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatTableModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatTabsModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatToolbarModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatTooltipModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MatTreeModule</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Flex
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>FlexLayoutModule</span>,
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MaterialModule</span> { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  Copyright 2019 Google Inc. All Rights Reserved.
</span></span></span><span style=display:flex><span><span style=color:#75715e>    Use of this source code is governed by an MIT-style license that
</span></span></span><span style=display:flex><span><span style=color:#75715e>    can be found in the LICENSE file at http://angular.io/license */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>^</span> <span style=color:#a6e22e>That</span> <span style=color:#a6e22e>ought</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>pad</span> <span style=color:#a6e22e>my</span> <span style=color:#a6e22e>word</span> <span style=color:#a6e22e>count</span>. <span style=color:#a6e22e>I</span> <span style=color:#a6e22e>included</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>copyright</span> <span style=color:#a6e22e>because</span> <span style=color:#a6e22e>that</span><span style=color:#e6db74>&#39;s just good juju for this guy.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Now that we&#39;</span><span style=color:#a6e22e>ve</span> <span style=color:#a6e22e>got</span> <span style=color:#66d9ef>this</span> <span style=color:#a6e22e>delightful</span> <span style=color:#a6e22e>helper</span> <span style=color:#66d9ef>set</span> <span style=color:#a6e22e>up</span>. <span style=color:#a6e22e>Import</span> <span style=color:#a6e22e>it</span> <span style=color:#a6e22e>into</span> <span style=color:#a6e22e>your</span> <span style=color:#e6db74>`app.module.ts`</span> <span style=color:#a6e22e>file</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>expose</span> <span style=color:#a6e22e>it</span> <span style=color:#a6e22e>to</span> <span style=color:#66d9ef>this</span> <span style=color:#a6e22e>module</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>app</span><span style=color:#f92672>!</span>  <span style=color:#a6e22e>I</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>m</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>going</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>copy</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>block</span>. <span style=color:#a6e22e>Just</span> <span style=color:#a6e22e>go</span> <span style=color:#66d9ef>do</span> <span style=color:#a6e22e>it</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Next</span> <span style=color:#a6e22e>piece</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>prep</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>add</span> <span style=color:#a6e22e>icons</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>my</span> <span style=color:#e6db74>`index.html`</span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```html
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;!-- index.html --&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;head&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!-- ... --&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;link href=&#34;https://fonts.googleapis.com/icon?family=Material+Icons&#34; rel=&#34;stylesheet&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/head&gt;
</span></span></span></code></pre></div><p>Then import a theme into <code>styles.scss</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#66d9ef>@import</span> <span style=color:#e6db74>&#34;~@angular/material/prebuilt-themes/indigo-pink.css&#34;</span>;
</span></span></code></pre></div><p>Sure. That looks pretty good.</p><p>Now that all that is out of the way. Make sure it works by deleting almost everything in your <code>app.component.html</code> and give it a toolbar.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>mat-toolbar</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span>&gt;
</span></span><span style=display:flex><span>    Esri Starter
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>mat-toolbar</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>router-outlet</span>&gt;&lt;/<span style=color:#f92672>router-outlet</span>&gt;
</span></span></code></pre></div><p>Start up the app with <code>ng serve</code> and check out the magic!</p><h2 id=this-is-the-time-i-realized-that-the-computer-i-was-writing-my-blog-on-was-running-angular-cli-v7-and-i-installed-all-v8-dependencies-so-here-we-go-upgrading>This is the time I realized that the computer I was writing my blog on was running Angular CLI v7 and I installed all v8 dependencies.. so here we go upgrading..<a hidden class=anchor aria-hidden=true href=#this-is-the-time-i-realized-that-the-computer-i-was-writing-my-blog-on-was-running-angular-cli-v7-and-i-installed-all-v8-dependencies-so-here-we-go-upgrading>#</a></h2><pre tabindex=0><code class=language-terminal data-lang=terminal>ng update @angular/cli @angular/core
</code></pre><p>Yeah. It&rsquo;s only that easy because we haven&rsquo;t done anything yet. You can read their upgrade guides over at <a href=https://update.angular.io/#7.0:8.0>https://update.angular.io/#7.0:8.0</a> though.</p><p>After a short blip.. here we go again! - Your app should be running now.</p><p>Those annoying margins! I forgot about my trusty angular scss defaults!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#f92672>html</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span><span style=color:#f92672>body</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>margin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>router-outlet</span><span style=color:#a6e22e>.router-flex</span> <span style=color:#f92672>+</span> <span style=color:#f92672>*</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>display</span><span style=color:#f92672>:</span> flex;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>flex</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1</span> auto;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>flex-direction</span><span style=color:#f92672>:</span> column;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>That router-outlet stuff is a bonus for you later - if you&rsquo;ve worked with these angular router and couldn&rsquo;t get the children to fill the height, you&rsquo;ll like it.</p><p>ALRIGHT! Enough already - let&rsquo;s get to the ESRI stuff!</p><p>First we need to install some more libraries.. esri-loader for importing the annoying dojo components and @types/arcgis-js-api for &mldr; types</p><pre tabindex=0><code class=language-terminal data-lang=terminal>npm install --save esri-loader @types/arcgis-js-api
</code></pre><p>Update your <code>tsconfig.app.json</code> to include the esri typings</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;extends&#34;</span>: <span style=color:#e6db74>&#34;../tsconfig.json&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;compilerOptions&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;outDir&#34;</span>: <span style=color:#e6db74>&#34;../out-tsc/app&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;types&#34;</span>: [<span style=color:#e6db74>&#34;arcgis-js-api&#34;</span>]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;exclude&#34;</span>: [<span style=color:#e6db74>&#34;test.ts&#34;</span>, <span style=color:#e6db74>&#34;**/*.spec.ts&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You should also add the esri styles to your index.html. We&rsquo;re using 4.12 for this article. Upgrade if you need to.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- ... --&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://js.arcgis.com/4.12/esri/css/main.css&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span></code></pre></div><p>Now to build the Arcmap component. You guessed it. Another CLI command</p><pre tabindex=0><code class=language-terminal data-lang=terminal>ng g c arcmap
</code></pre><p>Then we add it into our AppComponent. Since I like maps so much, I&rsquo;m going to make it the focal point of my app. Here is some code to make a generic sidenav component.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- app.component.html --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span> <span style=color:#a6e22e>fxFlexFill</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>mat-drawer-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;example-container&#34;</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;column&#34;</span> <span style=color:#a6e22e>fxFlex</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>mat-drawer</span> <span style=color:#a6e22e>mode</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;side&#34;</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>opened</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>true</span><span style=color:#960050;background-color:#1e0010>&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;app-sidenav&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>mat-card</span>&gt;
</span></span><span style=display:flex><span>        A Card!
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>mat-card</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>mat-drawer</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>mat-drawer-content</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;column&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>mat-toolbar</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>mat-icon-button</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onMenuToggle</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>mat-icon</span>&gt;menu&lt;/<span style=color:#f92672>mat-icon</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>h3</span>&gt;ESRI Starter&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>mat-toolbar</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>fxFlex</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>router-outlet</span>&gt;&lt;/<span style=color:#f92672>router-outlet</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>app-arcmap</span> <span style=color:#a6e22e>fxFlex</span>&gt;&lt;/<span style=color:#f92672>app-arcmap</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>mat-drawer-content</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>mat-drawer-container</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>I added a class to <code>app.component.scss</code> to make my sidenav a little more sidenavy</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#a6e22e>.app-sidenav</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Refresh your app and you&rsquo;ll see a side menu with a card, and a component that just says <code>arcmap works!</code> Congrats!</p><p>Now for the fun stuff! Below is legit all you&rsquo;ll need to render that map.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- arcmap.component.html --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mapview&#34;</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>arcmap</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>&mldr; Eventualy.</p><p>We need to do some magic in the typescript file still! Let&rsquo;s import things and set up our viewchild.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Component</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>OnInit</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ViewChild</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ElementRef</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>HostListener</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@angular/core&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>loadModules</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;esri-loader&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>esri</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>__esri</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;app-arcmap&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./arcmap.component.html&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>styleUrls</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;./arcmap.component.scss&#34;</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArcmapComponent</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>OnInit</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@ViewChild</span>(<span style=color:#e6db74>&#34;arcmap&#34;</span>, { <span style=color:#66d9ef>static</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> })
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>arcMapRef</span>: <span style=color:#66d9ef>ElementRef</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mapView</span>: <span style=color:#66d9ef>esri.MapView</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>map</span>: <span style=color:#66d9ef>esri.Map</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ngOnInit() {</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Still not broken!</p><p>Now let&rsquo;s init the map.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>  <span style=color:#a6e22e>ngOnInit() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>init</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>init() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>Map</span>, <span style=color:#a6e22e>MapView</span>] <span style=color:#f92672>=</span> (<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>loadModules</span>([
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;esri/Map&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;esri/views/MapView&#34;</span>
</span></span><span style=display:flex><span>      ])) <span style=color:#66d9ef>as</span> [<span style=color:#a6e22e>esri</span>.<span style=color:#a6e22e>MapConstructor</span>, <span style=color:#a6e22e>esri</span>.<span style=color:#a6e22e>MapViewConstructor</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>map</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Map</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>basemap</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;dark-gray&#34;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MapView</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>map</span>: <span style=color:#66d9ef>this.map</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>113.4909</span>, <span style=color:#ae81ff>53.544</span>],
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>12</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>container</span>: <span style=color:#66d9ef>this.arcMapRef.nativeElement</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ui</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>components</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;attribution&#34;</span>]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>I call another init because I like async/await and the lifecycle hooks yell at me when I throw an async in front of them. This just makes life a bit easier.</p><p>Hit save and you see &mldr;</p><p>#NOTHING!</p><p>This is because that div is very small. There is nothing HTMLy in it so it&rsquo;s tiny. We can fix that with some scss in <code>arcmap.component.scss</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#a6e22e>.mapview</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span><span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>overflow</span><span style=color:#f92672>:</span> hidden;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.ng-star-inserted</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Pow. You have an ESRI map sitting in your Angular app. It&rsquo;s centered on Edmonton because that&rsquo;s where I&rsquo;m from. Update the lat/lon in the init code to set it on your city if you&rsquo;re so interested.</p><p>Now is as good a time as any to add in a service for managing the state of our Map. To do this, I like to create a services module</p><p><code>ng g m services</code></p><p><code>ng g s services/arcmap</code></p><p>I decided that all I really want to do for my app is to set the center and zoom levels because really, what&rsquo;s a map that doesn&rsquo;t move around and zoom?</p><p>Inside of <code>src/services/arcmap.service.ts</code>&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Injectable</span>, <span style=color:#a6e22e>EventEmitter</span>, <span style=color:#a6e22e>Output</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Point</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lon</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Injectable</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>providedIn</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;root&#39;</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArcmapService</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>mapZoom</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>mapCenter</span>: <span style=color:#66d9ef>Point</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>113.4909</span>, <span style=color:#a6e22e>lon</span>: <span style=color:#66d9ef>53.544</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esriCenter</span>: <span style=color:#66d9ef>Point</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>113.4909</span>, <span style=color:#a6e22e>lon</span>: <span style=color:#66d9ef>53.544</span> };
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esriZoom</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Output</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>zoomEmitter</span>: <span style=color:#66d9ef>EventEmitter</span>&lt;<span style=color:#f92672>number</span>&gt; <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>EventEmitter</span>&lt;<span style=color:#f92672>number</span>&gt;();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@Output</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>centerEmitter</span>: <span style=color:#66d9ef>EventEmitter</span>&lt;<span style=color:#f92672>Point</span>&gt; <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>EventEmitter</span>&lt;<span style=color:#f92672>Point</span>&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setCenter</span>(<span style=color:#a6e22e>p</span>: <span style=color:#66d9ef>Point</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapCenter</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>centerEmitter</span>.<span style=color:#a6e22e>next</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapCenter</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>get</span> <span style=color:#a6e22e>center() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapCenter</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>z</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapZoom</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>zoomEmitter</span>.<span style=color:#a6e22e>next</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapZoom</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>get</span> <span style=color:#a6e22e>zoom() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapZoom</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setEsriZoom</span>(<span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>esriZoom</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>zoom</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setEsriCenter</span>(<span style=color:#a6e22e>point</span>: <span style=color:#66d9ef>Point</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>esriCenter</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>point</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Super easy. An interface for an x/y coordinate, a number for a zoom level, and a center of the previous interface for an x/y coordinate.</p><p>Next we&rsquo;ll add some listeners to our <code>arcmap.component.ts</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Component</span>, <span style=color:#a6e22e>OnInit</span>, <span style=color:#a6e22e>ViewChild</span>, <span style=color:#a6e22e>ElementRef</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>loadModules</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;esri-loader&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>esri</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>__esri</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ArcmapService</span>, <span style=color:#a6e22e>Point</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../services/arcmap.service&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-arcmap&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./arcmap.component.html&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>styleUrls</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;./arcmap.component.scss&#39;</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArcmapComponent</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>OnInit</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@ViewChild</span>(<span style=color:#e6db74>&#39;arcmap&#39;</span>, { <span style=color:#66d9ef>static</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> })
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>arcMapRef</span>: <span style=color:#66d9ef>ElementRef</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mapView</span>: <span style=color:#66d9ef>esri.MapView</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>map</span>: <span style=color:#66d9ef>esri.Map</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>arcMapService</span>: <span style=color:#66d9ef>ArcmapService</span>) {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ngOnInit() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>init</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>arcMapService</span>.<span style=color:#a6e22e>zoomEmitter</span>.<span style=color:#a6e22e>subscribe</span>((<span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>number</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;settnig zoom: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>zoom</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>zoom</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>zoom</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>arcMapService</span>.<span style=color:#a6e22e>centerEmitter</span>.<span style=color:#a6e22e>subscribe</span>((<span style=color:#a6e22e>center</span>: <span style=color:#66d9ef>Point</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>latitude</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>lat</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>longitude</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>lon</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>goTo</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>lon</span>, <span style=color:#a6e22e>center</span>.<span style=color:#a6e22e>lat</span>]
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>initWidgets() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>Search</span>, <span style=color:#a6e22e>BasemapGallery</span>, <span style=color:#a6e22e>Expand</span>, <span style=color:#a6e22e>Locate</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>loadModules</span>([
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;esri/widgets/Search&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;esri/widgets/BasemapGallery&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;esri/widgets/Expand&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;esri/widgets/Locate&#39;</span>
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>locateWidget</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Locate</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>view</span>: <span style=color:#66d9ef>this.mapView</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>basemapWidget</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BasemapGallery</span>({ <span style=color:#a6e22e>view</span>: <span style=color:#66d9ef>this.mapView</span> });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchWidget</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Search</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>view</span>: <span style=color:#66d9ef>this.mapView</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>ui</span>.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Expand</span>({ <span style=color:#a6e22e>view</span>: <span style=color:#66d9ef>this.mapView</span>, <span style=color:#a6e22e>content</span>: <span style=color:#66d9ef>searchWidget</span> }), <span style=color:#e6db74>&#39;top-right&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>ui</span>.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Expand</span>({ <span style=color:#a6e22e>view</span>: <span style=color:#66d9ef>this.mapView</span>, <span style=color:#a6e22e>content</span>: <span style=color:#66d9ef>basemapWidget</span> }), <span style=color:#e6db74>&#39;top-right&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>ui</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>locateWidget</span>, <span style=color:#e6db74>&#39;top-right&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>init() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>Map</span>, <span style=color:#a6e22e>MapView</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>loadModules</span>([<span style=color:#e6db74>&#39;esri/Map&#39;</span>, <span style=color:#e6db74>&#39;esri/views/MapView&#39;</span>]);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>map</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Map</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>basemap</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;hybrid&#39;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MapView</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>map</span>: <span style=color:#66d9ef>this.map</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>113.4909</span>, <span style=color:#ae81ff>53.544</span>],
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>12</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>container</span>: <span style=color:#66d9ef>this.arcMapRef.nativeElement</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ui</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>components</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;attribution&#39;</span>]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mapView</span>.<span style=color:#a6e22e>when</span>(<span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initWidgets</span>();
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>e</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the <code>ngOnInit</code> we set up all our listeners to our map service including how to react to the events along with some quality of life updates for initializing some widgets and the like.</p><p>I guess it&rsquo;s about now that I should prove to you that this thing works hey&mldr;</p><p>I&rsquo;m going to do this by making my app take you to a bunch of Canadian sports centers organized by city.</p><p>Under <code>app.component.ts</code> we&rsquo;ll need to add some data and a function to handle a click of this new data. Here you go, a component is born:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Component</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ArcmapService</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./services/arcmap.service&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-root&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./app.component.html&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>styleUrls</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;./app.component.scss&#39;</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppComponent</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;esri-app&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isMenuOpen</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Calgary&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>locations</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Saddledome&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>51.0374336</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>114.0519341</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>18</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;McMahon Stadium&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>51.0703813</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>114.1214653</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>18</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Edmonton&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>locations</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Rogers Place&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>53.5469828</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>113.4979082</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>19</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Commonwealth Stadium&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>53.5596184</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>113.4761666</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>19</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Toronto&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>locations</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Scotiabank Arena&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>43.6434661</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>79.3790989</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>20</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;BMO Field&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>43.6332247</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>79.4185654</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>20</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Vancouver&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>locations</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Rogers Arena&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>49.2778358</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>123.1088227</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>21</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;BC Place&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>49.27675</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lon</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>123.111999</span>
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>21</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>service</span>: <span style=color:#66d9ef>ArcmapService</span>) {}
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onMenuToggle() {</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isMenuOpen</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isMenuOpen</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onGotoLocation</span>(<span style=color:#a6e22e>location</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>lat</span>: <span style=color:#66d9ef>number</span>; <span style=color:#a6e22e>lon</span>: <span style=color:#66d9ef>number</span> }, <span style=color:#a6e22e>zoom</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>service</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>zoom</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>service</span>.<span style=color:#a6e22e>setCenter</span>(<span style=color:#a6e22e>location</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Next to update the template to be useful</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span> <span style=color:#a6e22e>fxFlexFill</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>mat-drawer-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;example-container&#34;</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;column&#34;</span> <span style=color:#a6e22e>fxFlex</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>mat-drawer</span> <span style=color:#a6e22e>mode</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;side&#34;</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>opened</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>isMenuOpen</span><span style=color:#960050;background-color:#1e0010>&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;app-sidenav&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>mat-card</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>mat-card-title</span>&gt;Sports Venues&lt;/<span style=color:#f92672>mat-card-title</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>mat-card-subtitle</span>&gt;A small list&lt;/<span style=color:#f92672>mat-card-subtitle</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>mat-card</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>mat-nav-list</span> <span style=color:#a6e22e>dense</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#960050;background-color:#1e0010>*</span><span style=color:#a6e22e>ngFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;let i of navItems&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>matSubheader</span>&gt;{{ i.title }}&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>mat-list-item</span> <span style=color:#960050;background-color:#1e0010>*</span><span style=color:#a6e22e>ngFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;let n of i.locations&#34;</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onGotoLocation</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>n</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>location</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>n</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>zoom</span><span style=color:#960050;background-color:#1e0010>)&#34;</span>&gt;
</span></span><span style=display:flex><span>            {{ n.title }}
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>a</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>mat-nav-list</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>mat-drawer</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>mat-drawer-content</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;column&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>mat-toolbar</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>mat-icon-button</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onMenuToggle</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>mat-icon</span>&gt;menu&lt;/<span style=color:#f92672>mat-icon</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>h3</span>&gt;ESRI Starter&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>mat-toolbar</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>fxFlex</span> <span style=color:#a6e22e>fxLayout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;floating-panel&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>router-outlet</span>&gt;&lt;/<span style=color:#f92672>router-outlet</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>app-arcmap</span> <span style=color:#a6e22e>fxFlex</span>&gt;&lt;/<span style=color:#f92672>app-arcmap</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>mat-drawer-content</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>mat-drawer-container</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>Go ahead and refresh the app and you can browse some of Canada&rsquo;s finest sports locales!</p><p>My short time working with the ArcGIS JavaScript API has been an interesting one. It&rsquo;s impressively powerful and transitioned my opinions on GIS from &lsquo;So it&rsquo;s a map with some lines&rsquo; to &lsquo;LOOK AT ALL THE COOL THINGS&rsquo;.</p><p>The code on github has some more little knick-knacks added in. Feel free to explore and as questions! Especially around why I track two different map zoom levels and extents ;)</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.jimdhughes.com/>James Hughes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>