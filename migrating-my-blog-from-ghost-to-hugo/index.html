<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.64.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Migrating my Blog from Ghost to Hugo&nbsp;&ndash;&nbsp;James Hughes</title><link rel=stylesheet href=/css/core.min.99d761621eb15531f47d6f109c742c4d2f97f9c10fed380e3da27af7676a27a1fb5968bfbd3207717f11d40ad1d68b92.css integrity=sha384-mddhYh6xVTH0fW8QnHQsTS+X+cEP7TgOPaJ692dqJ6H7WWi/vTIHcX8R1ArR1ouS><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrating my Blog from Ghost to Hugo"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">James Hughes</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories/>Categories</a><a class="nav item" href=/tags/>Tags</a><a class="nav item" href></a><a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Migrating my Blog from Ghost to Hugo</h1><p class="article date">Wednesday, July 1, 2020</p></section><article class="article markdown-body"><h1 id=the-story>The Story</h1><p>Like any hipster developer, I got caught up hard in the node.js craze circa 2015 and when go started gaining traction, heck I jumped over there too. I first started my blog in an attempt to &lsquo;practice what I preach&rsquo; to my peers and young minds that I was hoping to help mould for the best. I think that every developer should have their own blog. Not in a vain attempt to get clicks or ad revenue, but to keep a log of that tough-to-diagnose error that they tried for weeks to diagnose and fix. My blog acts a lot as a personal reference for issues I&rsquo;ve faced in my coding life and what I did to get around them.</p><p>In a silly attempt to get approved for google ads, I deleted several very helpful-for-me posts that google flagged as being too short to allow me to enable ads on my site for. So I deleted them. This is the only real regret I have in my blogging life.</p><p><strong>ANYWAYS</strong></p><p>That&rsquo;s why I blog. This is also partially the reason why I&rsquo;ve switched from Ghost to Hugo. I was hoping to set up google ads on my blog to help pay for my hosting costs. Since I couldn&rsquo;t get approved for ads, I started exploring different paths.</p><h1 id=github-pages>Github Pages</h1><p><a href=https://pages.github.com target=_blank>Github Pages</a> is an offering that allows you to publish a website using git. The name pretty much says it all. The best part: It&rsquo;s free! The genearl idea is:</p><ol><li>Create a new repository that looks like [yourusername].github.io</li><li>Clone the repo</li><li>Add an <code>index.html</code> file with some content</li><li>Commit and push</li><li>Navigate to [yourusername].github.io and boom, you have a website!</li></ol><p>Based on my understanding, github pages does a great job at hosting up static html files. Since my current blog runs on Ghost which is a client/server architecture, I would need to migrate my blog to a static site generator so I can make use of Github Pages.</p><p>Since I have fallen in lust with go, and Hugo is, by their own definition</p><blockquote><p>The worldâ€™s fastest framework for building websites</p></blockquote><p>I decided to give it a go!</p><h1 id=setting-up-hugo>Setting up Hugo</h1><p>Since I use my macbook for everything non work-related, I used homebrew to install hugo. There are several installation options <a href=https://gohugo.io/getting-started/installing/ target=_blank>located on hugo&rsquo;s official getting started pages</a> but I elected to use the trusty homebrew option.</p><pre><code>brew install hugo
</code></pre><p>Once that&rsquo;s all done, you can create a new site by running</p><pre><code>hugo new site myepicblog
</code></pre><p>Next you should initialize your git repo and add a theme. I&rsquo;m using the theme <a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>hugo-notepadium</a>. You can either clone the themes and commit them with your code or use the snazzy <code>git submodules</code> to load it up during your build phase. I elect to load it during the build phase.</p><pre><code>cd myepicblog
git submodule add https://github.com/cntrump/hugo-notepadium.git themes/hugo-notepadium
</code></pre><p>You can see what you&rsquo;ve got happening by running <code>hugo server</code> and navigating to <code>localhost:1313</code> You should see a static site and some content. Sweet! Our Hugo site is running.</p><h1 id=migrating-content>Migrating content</h1><p>I started to cringe at the idea of manually moving my content from Ghost to Hugo. Ghost&rsquo;s content is stored as markdown Hugo&rsquo;s page setup is, as expected, all stored in Markdown while Ghost relies on a database to organize content. Luckily the community came to the rescue! <a href=https://gohugo.io/tools/migrations/ target=_blank>Ghost provides a list of tools</a> developed by the community to help you migrate from different engines to hugo. Luckily, <a href=https://github.com/jbarone/ghostToHugo target=_blank>ghostToHugo</a> was there to save my day.</p><h2 id=snag-a-backup-of-your-ghost-blog>Snag a backup of your ghost blog</h2><p>Log in to the admin portion of your ghost blog and perform a backup. this creates a <code>.json</code> file with all of your blog information. You can find detailed instructions over at <a href=https://www.ghostforbeginners.com/backup-ghost/ target=_blank>ghostforbeginners.com</a>. Save the export.json somewhere accessible!</p><h2 id=migrate-content>Migrate content</h2><p>Go ahead and install <code>ghostToHugo</code> as mentioned above from <a href=https://github.com/jbarone/ghostToHugo target=_blank>here</a>. There are many options to install it but I chose to use the go tooling for it.
Go ahead and open a terminal and type <code>go get -u github.com/jbarone/ghostToHugo</code></p><p>Now it&rsquo;s as easy as running <code>ghostToHugo export.json</code>. I had to play with the dateformat a bit as my blog apparently didn&rsquo;t use the default, but you can figure that out if your blog is different. You can configure this with the <code>-d</code> flag in <code>ghostToHugo</code> This will create a new hugo site and will put all of your ghost posts in the <code>content</code> folder. Copy these to your new <code>content</code> folder from the previous site setup and you could be good to go from here.</p><p>Personally, I wanted a <em>bit</em> more organization in my posts. I don&rsquo;t have a lot, but I have enough where a flat structure wasn&rsquo;t working for me. Spend some time here organizing your posts structure for your own sanity down the line. I chose to organize my posts with a <code>content/posts/:year/:slug.md</code> structure.</p><p>Hugo is probably refreshing itself so you can see your posts showing up at <code>localhost:1313</code> as long as your server is still running</p><h2 id=for-backwards-compatibility>For backwards-compatibility&mldr;</h2><p>I have literally one post that anyone ever finds on google. It&rsquo;s my post on <a href=https://blog.jimdhughes.com/indexeddb-react target=_blank>react and indexeddb</a> and it generates an ok number of clicks a week so I don&rsquo;t want it to get de-ranked. My ghost blog had a very simple permalink setup: <code>/:slug</code>. Luckily, in ghost I can configure the same thing! In <code>config.toml</code> I added</p><pre><code>[permalinks]
  posts = &quot;/:slug/&quot;
</code></pre><p>and just like that, my posts are all configured the exact same as my old ghost blog. You can play around with that to fit your own use-case.</p><h2 id=now-what>Now What?</h2><p>You could be hacky and just initialize your github repo in the <code>public/*</code> folder, add the contents and push&mldr; but we&rsquo;re devs and we like to make things automated and slick.</p><h1 id=github-setup>GitHub setup</h1><p>We are going to need&mldr;</p><ol><li>a repo for your blog&rsquo;s source control. I chose <code>github.com/jimdhughes/blog</code> (it&rsquo;s private)</li><li>a repo for your published site. I chose <code>github.com/jimdhughes/jimdhughes.github.io</code><ul><li>the <code>.github.io</code> is very important.</li></ul></li><li>A secret Token that gives you repo permissions in your account. This will need to be added to the repo identified by #1</li><li>a Github action to build and deploy your static site :)</li></ol><h2 id=lets-do-it>Let&rsquo;s do it!</h2><ol><li><p>Steps 1 and two are pretty straight forward. Add your hugo site to the repo in #1 and leave the repo from #2 empty.</p></li><li><p>Create a new personal access token here: <a href=https://github.com/settings/tokens/new>https://github.com/settings/tokens/new</a> with <code>repo</code> control. It&rsquo;s going to give you a token. You need to copy this as you&rsquo;re going to set it up in your project repo.</p></li><li><p>In your project repo, add a &lsquo;secret&rsquo; in <code>github.com/{yourusername}/{yourrepo}/settings/security/secrets</code> called &lsquo;TOKEN&rsquo; and paste the value from step 2</p></li><li><p>Add a build.yml file in <code>.github/workflows</code></p></li></ol><pre><code>#build.yml
name: CI
on: push
jobs:
  deploy:
    runs-on: ubuntu-18.04
    steps:
      - name: Git checkout
        uses: actions/checkout@v2

      - name: Update theme
        run: git submodule update --init --recursive

      - name: Setup hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: &quot;0.64.0&quot;

      - name: Build
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.TOKEN }}
          external_repository: &lt;YOURACCOUNT&gt;/&lt;YOURGITHUBIOREPO&gt;
          publish_dir: ./public
          user_name: &lt;YOURUSERNAME&gt;
          user_email: &lt;YOUREMAIL&gt;
          publish_branch: master
</code></pre><p>Make sure to replace all the <yourxxx>in the above yml file with actual info. You can see we make use of a few github actions by peaceiris and that token we created gets used here to publish your page.</p><p>Commit all this code and push it to master and then watch the magic happen :)
An action will be triggered which will build your hugo static site and push all the assets to your .github.io repository. Navigate to <yourusername>.github.io and you can see the delight that is your static website!</p><h1 id=adding-a-custom-domain>Adding a custom domain</h1><p>The last step in my migration was to add a custom domain to github pages. To do this you need to do a couple things.</p><ol><li>Log in to your DNS and remove the A Record for your subdomain and add a CNAME record of <yourusername>.github.io</li><li>Once the DNS has propagated, go to the repo of your <yourusername>.github.io<ol><li>Press Settings</li><li>go down to Github Pages</li><li>under custom domain, add the name of your domain (mine was blog.jimdhughes.com)</li></ol></li><li>Once github finds the cname reference in your DNS, it will generate SSL certs. I elected to &lsquo;enforce SSL&rsquo; because I think it&rsquo;s good practice. This will redirect all http requests to your blog to https.</li></ol><p>To ensure that the CNAME takes on each deploy, add a static file called <code>CNAME</code> to the <code>static</code> folder of your repo and put the cname you want in there. For instance, my <code>static/CNAME</code> folder has <code>blog.jimdhughes.com</code> saved in it.</p><p>That&rsquo;s it! A bit of effort and I&rsquo;ve made my blog a little simpler and saved myself $5 USD / month (which is like $10000 CDN/mo) and I think it feels just a little bit snappier.</p><p>Cheers!</p></article><section class="article labels"><a class=category href=/categories/blog/>Blog</a><a class=category href=/categories/golang/>Golang</a><a class=tag href=/tags/hugo/>Hugo</a><a class=tag href=/tags/ghost/>Ghost</a><a class=tag href=/tags/github-pages/>Github Pages</a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/docker-seq-setup-default-token/><span class="iconfont icon-article"></span>Docker Seq Setup With API Token</a></p><p><a class=link href=/nasa-has-an-api/><span class="iconfont icon-article"></span>NASA has an API!</a></p></section><section class="article discussion"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"https-blog-jimdhughes-com"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>Â©2020 James Hughes.</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-61647183-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>