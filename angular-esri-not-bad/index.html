<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.64.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Angular + ESRI = Not bad&nbsp;&ndash;&nbsp;James Hughes</title><link rel=stylesheet href=/css/core.min.99d761621eb15531f47d6f109c742c4d2f97f9c10fed380e3da27af7676a27a1fb5968bfbd3207717f11d40ad1d68b92.css integrity=sha384-mddhYh6xVTH0fW8QnHQsTS+X+cEP7TgOPaJ692dqJ6H7WWi/vTIHcX8R1ArR1ouS><meta name=twitter:card content="summary"><meta name=twitter:title content="Angular + ESRI = Not bad"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">James Hughes</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories/>Categories</a><a class="nav item" href=/tags/>Tags</a><a class="nav item" href></a><a class="nav item" href></a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Angular + ESRI = Not bad</h1><p class="article date">Friday, September 6, 2019</p></section><article class="article markdown-body"><p>There&rsquo;s no question that I&rsquo;m an ng fanboy.</p><p>React&rsquo;s willy nilly do whatever you want attitude doesn&rsquo;t do much for me.</p><p>Vue is basically react. Let&rsquo;s be serious.</p><p>I like the clear separation of my HTML, CSS, TS, and unit tests. That won&rsquo;t ever go away. Work has taken me into some new territories where I didn&rsquo;t think I&rsquo;d have as much fun as I am. That&rsquo;s enough of my ranting about javascript frameworks. Let&rsquo;s dive into the root of the article!</p><p>If you don&rsquo;t feel like reading below, the code is up on my github. Check it out at <a href=https://github.com/jimdhughes/jdhc-esri-starter target=_blank>https://github.com/jimdhughes/jdhc-esri-starter</a></p><p>If you feel like following along with some code and some possible random side stories, follow along!</p><p>Since I value productivity over feeling clever, I&rsquo;m going to use the angluar cli. I hope you have it installed too. We&rsquo;re going to use Angular v8. I typically add routing and use SCSS but feel free to make it your own.</p><pre><code class=language-terminal data-lang=terminal>ng new esri-app
</code></pre><p>I absolutely LOVE the Angular team&rsquo;s Material libraries as well as the flex-layout library, so those are the FIRST things that I install. Being a proponent of functional, performant and quick to develop, I have no problem admitting that I&rsquo;d prefer to use some angular directives over writing CSS. You can read the official documentation over at <a href=https://material.angular.io/guide/getting-started target=_blank>https://material.angular.io/guide/getting-started</a> and <a href=https://github.com/angular/flex-layout target=_blank>https://github.com/angular/flex-layout</a> or you can just do what I tell you below.</p><pre><code class=language-terminal data-lang=terminal>cd esri-app
npm install --save @angular/material @angular/cdk @angular/animations @angular/flex-layout
</code></pre><p>After waiting a few minutes, you need to add some things into your <code>app.module.ts</code> file.</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=c1>// ... Some imports
</span><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>BrowserAnimationsModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/platform-browser/animations&#39;</span><span class=p>;</span>

<span class=kd>@NgModule</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>declarations</span><span class=o>:</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span>
  <span class=nx>imports</span><span class=o>:</span> <span class=p>[</span>
    <span class=nx>BrowserModule</span><span class=p>,</span>
    <span class=nx>BrowserAnimationsModule</span><span class=p>,</span>
    <span class=nx>AppRoutingModule</span><span class=p>,</span>
  <span class=p>]</span><span class=p>,</span>
  <span class=nx>entryComponents</span><span class=o>:</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span>
  <span class=nx>providers</span><span class=o>:</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span>
  <span class=nx>bootstrap</span><span class=o>:</span> <span class=p>[</span><span class=nx>AppComponent</span><span class=p>]</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>AppModule</span> <span class=p>{</span><span class=p>}</span>

</code></pre></div><p>I have no shame in importing the entire angular material library into a helper module, especially when I don&rsquo;t expect the app to ever make it past my desktop or workstation. There&rsquo;s something to be said about just having everything up front then optimizing when you have to. So we&rsquo;re going to use the stackblitz template that google provides but I&rsquo;ll use the CLI to make live a bit more structured.</p><pre><code class=language-terminal data-lang=terminal>ng g m material
</code></pre><p>Now you&rsquo;ll have to edit your <code>material.module.ts</code> file to include all the material directives as well as the flex-layout directives.</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=c1>// src/app/material/material.module.ts
</span><span class=c1></span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>NgModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>CommonModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/common&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>A11yModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/a11y&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>BidiModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/bidi&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>ObserversModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/observers&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>OverlayModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/overlay&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>PlatformModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/platform&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>PortalModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/portal&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>ScrollingModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/scrolling&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>CdkStepperModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/stepper&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>CdkTableModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/table&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>CdkTreeModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/cdk/tree&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span>
  <span class=nx>MatAutocompleteModule</span><span class=p>,</span>
  <span class=nx>MatBadgeModule</span><span class=p>,</span>
  <span class=nx>MatBottomSheetModule</span><span class=p>,</span>
  <span class=nx>MatButtonModule</span><span class=p>,</span>
  <span class=nx>MatButtonToggleModule</span><span class=p>,</span>
  <span class=nx>MatCardModule</span><span class=p>,</span>
  <span class=nx>MatCheckboxModule</span><span class=p>,</span>
  <span class=nx>MatChipsModule</span><span class=p>,</span>
  <span class=nx>MatDatepickerModule</span><span class=p>,</span>
  <span class=nx>MatDialogModule</span><span class=p>,</span>
  <span class=nx>MatDividerModule</span><span class=p>,</span>
  <span class=nx>MatExpansionModule</span><span class=p>,</span>
  <span class=nx>MatFormFieldModule</span><span class=p>,</span>
  <span class=nx>MatGridListModule</span><span class=p>,</span>
  <span class=nx>MatIconModule</span><span class=p>,</span>
  <span class=nx>MatInputModule</span><span class=p>,</span>
  <span class=nx>MatListModule</span><span class=p>,</span>
  <span class=nx>MatMenuModule</span><span class=p>,</span>
  <span class=nx>MatNativeDateModule</span><span class=p>,</span>
  <span class=nx>MatPaginatorModule</span><span class=p>,</span>
  <span class=nx>MatProgressBarModule</span><span class=p>,</span>
  <span class=nx>MatProgressSpinnerModule</span><span class=p>,</span>
  <span class=nx>MatRadioModule</span><span class=p>,</span>
  <span class=nx>MatRippleModule</span><span class=p>,</span>
  <span class=nx>MatSelectModule</span><span class=p>,</span>
  <span class=nx>MatSidenavModule</span><span class=p>,</span>
  <span class=nx>MatSliderModule</span><span class=p>,</span>
  <span class=nx>MatSlideToggleModule</span><span class=p>,</span>
  <span class=nx>MatSnackBarModule</span><span class=p>,</span>
  <span class=nx>MatSortModule</span><span class=p>,</span>
  <span class=nx>MatStepperModule</span><span class=p>,</span>
  <span class=nx>MatTableModule</span><span class=p>,</span>
  <span class=nx>MatTabsModule</span><span class=p>,</span>
  <span class=nx>MatToolbarModule</span><span class=p>,</span>
  <span class=nx>MatTooltipModule</span><span class=p>,</span>
  <span class=nx>MatTreeModule</span><span class=p>,</span>
<span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/material&#39;</span><span class=p>;</span>

<span class=kr>import</span> <span class=p>{</span> <span class=nx>FlexLayoutModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/flex-layout&#39;</span><span class=p>;</span>

<span class=kd>@NgModule</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>declarations</span><span class=o>:</span> <span class=p>[</span><span class=p>]</span><span class=p>,</span>
  <span class=nx>imports</span><span class=o>:</span> <span class=p>[</span>
    <span class=nx>CommonModule</span>
  <span class=p>]</span><span class=p>,</span>
  <span class=nx>exports</span><span class=o>:</span> <span class=p>[</span>
    <span class=c1>// CDK
</span><span class=c1></span>    <span class=nx>A11yModule</span><span class=p>,</span>
    <span class=nx>BidiModule</span><span class=p>,</span>
    <span class=nx>ObserversModule</span><span class=p>,</span>
    <span class=nx>OverlayModule</span><span class=p>,</span>
    <span class=nx>PlatformModule</span><span class=p>,</span>
    <span class=nx>PortalModule</span><span class=p>,</span>
    <span class=nx>ScrollingModule</span><span class=p>,</span>
    <span class=nx>CdkStepperModule</span><span class=p>,</span>
    <span class=nx>CdkTableModule</span><span class=p>,</span>
    <span class=nx>CdkTreeModule</span><span class=p>,</span>

    <span class=c1>// Material
</span><span class=c1></span>    <span class=nx>MatAutocompleteModule</span><span class=p>,</span>
    <span class=nx>MatBadgeModule</span><span class=p>,</span>
    <span class=nx>MatBottomSheetModule</span><span class=p>,</span>
    <span class=nx>MatButtonModule</span><span class=p>,</span>
    <span class=nx>MatButtonToggleModule</span><span class=p>,</span>
    <span class=nx>MatCardModule</span><span class=p>,</span>
    <span class=nx>MatCheckboxModule</span><span class=p>,</span>
    <span class=nx>MatChipsModule</span><span class=p>,</span>
    <span class=nx>MatDatepickerModule</span><span class=p>,</span>
    <span class=nx>MatDialogModule</span><span class=p>,</span>
    <span class=nx>MatDividerModule</span><span class=p>,</span>
    <span class=nx>MatExpansionModule</span><span class=p>,</span>
    <span class=nx>MatFormFieldModule</span><span class=p>,</span>
    <span class=nx>MatGridListModule</span><span class=p>,</span>
    <span class=nx>MatIconModule</span><span class=p>,</span>
    <span class=nx>MatInputModule</span><span class=p>,</span>
    <span class=nx>MatListModule</span><span class=p>,</span>
    <span class=nx>MatMenuModule</span><span class=p>,</span>
    <span class=nx>MatNativeDateModule</span><span class=p>,</span>
    <span class=nx>MatPaginatorModule</span><span class=p>,</span>
    <span class=nx>MatProgressBarModule</span><span class=p>,</span>
    <span class=nx>MatProgressSpinnerModule</span><span class=p>,</span>
    <span class=nx>MatRadioModule</span><span class=p>,</span>
    <span class=nx>MatRippleModule</span><span class=p>,</span>
    <span class=nx>MatSelectModule</span><span class=p>,</span>
    <span class=nx>MatSidenavModule</span><span class=p>,</span>
    <span class=nx>MatSliderModule</span><span class=p>,</span>
    <span class=nx>MatSlideToggleModule</span><span class=p>,</span>
    <span class=nx>MatSnackBarModule</span><span class=p>,</span>
    <span class=nx>MatSortModule</span><span class=p>,</span>
    <span class=nx>MatStepperModule</span><span class=p>,</span>
    <span class=nx>MatTableModule</span><span class=p>,</span>
    <span class=nx>MatTabsModule</span><span class=p>,</span>
    <span class=nx>MatToolbarModule</span><span class=p>,</span>
    <span class=nx>MatTooltipModule</span><span class=p>,</span>
    <span class=nx>MatTreeModule</span><span class=p>,</span>
    <span class=c1>// Flex
</span><span class=c1></span>    <span class=nx>FlexLayoutModule</span><span class=p>,</span>
  <span class=p>]</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>MaterialModule</span> <span class=p>{</span> <span class=p>}</span>

<span class=cm>/**  Copyright 2019 Google Inc. All Rights Reserved.
</span><span class=cm>    Use of this source code is governed by an MIT-style license that
</span><span class=cm>    can be found in the LICENSE file at http://angular.io/license */</span>

<span class=o>^</span> <span class=nx>That</span> <span class=nx>ought</span> <span class=nx>to</span> <span class=nx>pad</span> <span class=nx>my</span> <span class=nx>word</span> <span class=nx>count</span><span class=p>.</span> <span class=nx>I</span> <span class=nx>included</span> <span class=nx>the</span> <span class=nx>copyright</span> <span class=nx>because</span> <span class=nx>that</span><span class=s1>&#39;s just good juju for this guy.
</span><span class=s1>
</span><span class=s1>Now that we&#39;</span><span class=nx>ve</span> <span class=nx>got</span> <span class=k>this</span> <span class=nx>delightful</span> <span class=nx>helper</span> <span class=nx>set</span> <span class=nx>up</span><span class=p>.</span> <span class=nx>Import</span> <span class=nx>it</span> <span class=nx>into</span> <span class=nx>your</span> <span class=sb>`</span><span class=sb>app.module.ts</span><span class=sb>`</span> <span class=nx>file</span> <span class=nx>to</span> <span class=nx>expose</span> <span class=nx>it</span> <span class=nx>to</span> <span class=k>this</span> <span class=kr>module</span> <span class=nx>of</span> <span class=nx>your</span> <span class=nx>app</span><span class=o>!</span>  <span class=nx>I</span><span class=err>&#39;</span><span class=nx>m</span> <span class=nx>not</span> <span class=nx>going</span> <span class=nx>to</span> <span class=nx>copy</span> <span class=nx>the</span> <span class=nx>code</span> <span class=nx>block</span><span class=p>.</span> <span class=nx>Just</span> <span class=nx>go</span> <span class=k>do</span> <span class=nx>it</span><span class=p>.</span>

<span class=nx>Next</span> <span class=nx>piece</span> <span class=nx>of</span> <span class=nx>prep</span> <span class=nx>is</span> <span class=nx>to</span> <span class=nx>add</span> <span class=nx>icons</span> <span class=nx>to</span> <span class=nx>my</span> <span class=sb>`</span><span class=sb>index.html</span><span class=sb>`</span><span class=p>.</span><span class=p>.</span><span class=p>.</span>

<span class=sb>`</span><span class=sb>`</span><span class=sb>`</span><span class=sb>html
</span><span class=sb>&lt;!-- index.html --&gt;
</span><span class=sb>
</span><span class=sb>&lt;head&gt;
</span><span class=sb>    &lt;!-- ... --&gt;
</span><span class=sb>    &lt;link href=&#34;https://fonts.googleapis.com/icon?family=Material+Icons&#34; rel=&#34;stylesheet&#34;&gt;
</span><span class=sb>&lt;/head&gt;
</span><span class=sb>
</span></code></pre></div><p>Then import a theme into <code>styles.scss</code></p><div class=highlight><pre class=chroma><code class=language-scss data-lang=scss><span class=k>@import</span> <span class=s2>&#34;</span><span class=s2>~@angular/material/prebuilt-themes/indigo-pink.css</span><span class=s2>&#34;</span><span class=p>;</span>
</code></pre></div><p>Sure. That looks pretty good.</p><p>Now that all that is out of the way. Make sure it works by deleting almost everything in your <code>app.component.html</code> and give it a toolbar.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>mat-toolbar</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;primary&#34;</span><span class=p></span><span class=p>&gt;</span>
    Esri Starter
<span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-toolbar</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>router-outlet</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>router-outlet</span><span class=p>&gt;</span>
</code></pre></div><p>Start up the app with <code>ng serve</code> and check out the magic!</p><h2 id=this-is-the-time-i-realized-that-the-computer-i-was-writing-my-blog-on-was-running-angular-cli-v7-and-i-installed-all-v8-dependencies-so-here-we-go-upgrading>This is the time I realized that the computer I was writing my blog on was running Angular CLI v7 and I installed all v8 dependencies.. so here we go upgrading..</h2><pre><code class=language-terminal data-lang=terminal>ng update @angular/cli @angular/core
</code></pre><p>Yeah. It&rsquo;s only that easy because we haven&rsquo;t done anything yet. You can read their upgrade guides over at <a href=https://update.angular.io/#7.0:8.0 target=_blank>https://update.angular.io/#7.0:8.0</a> though.</p><p>After a short blip.. here we go again! - Your app should be running now.</p><p>Those annoying margins! I forgot about my trusty angular scss defaults!</p><div class=highlight><pre class=chroma><code class=language-scss data-lang=scss><span class=nt>html</span><span class=o>,</span>
<span class=nt>body</span> <span class=p>{</span>
  <span class=nt>height</span><span class=nd>:</span> <span class=nt>100</span><span class=err>%</span><span class=p>;</span>
  <span class=nt>width</span><span class=nd>:</span> <span class=nt>100</span><span class=err>%</span><span class=p>;</span>
  <span class=nt>margin</span><span class=nd>:</span> <span class=nt>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=nt>router-outlet</span><span class=nc>.</span><span class=nc>router-flex</span> <span class=o>+</span> <span class=o>*</span> <span class=p>{</span>
  <span class=nt>display</span><span class=nd>:</span> <span class=nt>flex</span><span class=p>;</span>
  <span class=nt>flex</span><span class=nd>:</span> <span class=nt>1</span> <span class=nt>1</span> <span class=nt>auto</span><span class=p>;</span>
  <span class=nt>flex-direction</span><span class=nd>:</span> <span class=nt>column</span><span class=p>;</span>
<span class=p>}</span>

</code></pre></div><p>That router-outlet stuff is a bonus for you later - if you&rsquo;ve worked with these angular router and couldn&rsquo;t get the children to fill the height, you&rsquo;ll like it.</p><p>ALRIGHT! Enough already - let&rsquo;s get to the ESRI stuff!</p><p>First we need to install some more libraries.. esri-loader for importing the annoying dojo components and @types/arcgis-js-api for &mldr; types</p><pre><code class=language-terminal data-lang=terminal>npm install --save esri-loader @types/arcgis-js-api
</code></pre><p>Update your <code>tsconfig.app.json</code> to include the esri typings</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=s2>&#34;../tsconfig.json&#34;</span><span class=p>,</span>
  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&#34;outDir&#34;</span><span class=p>:</span> <span class=s2>&#34;../out-tsc/app&#34;</span><span class=p>,</span>
    <span class=nt>&#34;types&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;arcgis-js-api&#34;</span><span class=p>]</span>
  <span class=p>}</span><span class=p>,</span>
  <span class=nt>&#34;exclude&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;test.ts&#34;</span><span class=p>,</span> <span class=s2>&#34;**/*.spec.ts&#34;</span><span class=p>]</span>
<span class=p>}</span>

</code></pre></div><p>You should also add the esri styles to your index.html. We&rsquo;re using 4.12 for this article. Upgrade if you need to.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>head</span><span class=p></span><span class=p>&gt;</span>
    <span class=c>&lt;!--</span><span class=c> ... </span><span class=c>--&gt;</span>
    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://js.arcgis.com/4.12/esri/css/main.css&#34;</span><span class=p></span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=p>/</span><span class=nt>head</span><span class=p>&gt;</span>
</code></pre></div><p>Now to build the Arcmap component. You guessed it. Another CLI command</p><pre><code class=language-terminal data-lang=terminal>ng g c arcmap
</code></pre><p>Then we add it into our AppComponent. Since I like maps so much, I&rsquo;m going to make it the focal point of my app. Here is some code to make a generic sidenav component.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=c>&lt;!--</span><span class=c> app.component.html </span><span class=c>--&gt;</span>
<span class=p>&lt;</span><span class=nt>div</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span> <span class=na>fxFlexFill</span><span class=p></span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>mat-drawer-container</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;example-container&#34;</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;column&#34;</span> <span class=na>fxFlex</span><span class=p></span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>mat-drawer</span> <span class=na>mode</span><span class=o>=</span><span class=s>&#34;side&#34;</span> <span class=err>[</span><span class=na>opened</span><span class=err>]</span><span class=err>=</span><span class=err>&#34;</span><span class=na>true</span><span class=err>&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;app-sidenav&#34;</span><span class=p></span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>mat-card</span><span class=p></span><span class=p>&gt;</span>
        A Card!
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-card</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>mat-drawer-content</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;column&#34;</span><span class=p></span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>mat-toolbar</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;primary&#34;</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>button</span> <span class=na>mat-icon-button</span> <span class=err>(</span><span class=na>click</span><span class=err>)</span><span class=err>=</span><span class=err>&#34;</span><span class=na>onMenuToggle</span><span class=err>(</span><span class=err>)</span><span class=err>&#34;</span><span class=p></span><span class=p>&gt;</span>
          <span class=p>&lt;</span><span class=nt>mat-icon</span><span class=p></span><span class=p>&gt;</span>menu<span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-icon</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=p>/</span><span class=nt>button</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>h3</span><span class=p></span><span class=p>&gt;</span>ESRI Starter<span class=p>&lt;</span><span class=p>/</span><span class=nt>h3</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-toolbar</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>fxFlex</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>router-outlet</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>router-outlet</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>app-arcmap</span> <span class=na>fxFlex</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>app-arcmap</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer-content</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer-container</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>

</code></pre></div><p>I added a class to <code>app.component.scss</code> to make my sidenav a little more sidenavy</p><div class=highlight><pre class=chroma><code class=language-scss data-lang=scss><span class=nc>.</span><span class=nc>app-sidenav</span> <span class=p>{</span>
  <span class=nt>width</span><span class=nd>:</span> <span class=nt>250px</span><span class=p>;</span>
<span class=p>}</span>

</code></pre></div><p>Refresh your app and you&rsquo;ll see a side menu with a card, and a component that just says <code>arcmap works!</code> Congrats!</p><p>Now for the fun stuff! Below is legit all you&rsquo;ll need to render that map.</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=c>&lt;!--</span><span class=c> arcmap.component.html </span><span class=c>--&gt;</span>
<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mapview&#34;</span> <span class=err>#</span><span class=na>arcmap</span><span class=p></span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div><p>&mldr; Eventualy.</p><p>We need to do some magic in the typescript file still! Let&rsquo;s import things and set up our viewchild.</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=kr>import</span> <span class=p>{</span>
  <span class=nx>Component</span><span class=p>,</span>
  <span class=nx>OnInit</span><span class=p>,</span>
  <span class=nx>ViewChild</span><span class=p>,</span>
  <span class=nx>ElementRef</span><span class=p>,</span>
  <span class=nx>HostListener</span>
<span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@angular/core&#34;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>loadModules</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;esri-loader&#34;</span><span class=p>;</span>
<span class=kr>import</span> <span class=nx>esri</span> <span class=o>=</span> <span class=nx>__esri</span><span class=p>;</span>

<span class=kd>@Component</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>selector</span><span class=o>:</span> <span class=s2>&#34;app-arcmap&#34;</span><span class=p>,</span>
  <span class=nx>templateUrl</span><span class=o>:</span> <span class=s2>&#34;./arcmap.component.html&#34;</span><span class=p>,</span>
  <span class=nx>styleUrls</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;./arcmap.component.scss&#34;</span><span class=p>]</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>ArcmapComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
  <span class=kd>@ViewChild</span><span class=p>(</span><span class=s2>&#34;arcmap&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=kr>static</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span><span class=p>)</span>
  <span class=kr>private</span> <span class=nx>arcMapRef</span>: <span class=kt>ElementRef</span><span class=p>;</span>
  <span class=nx>mapView</span>: <span class=kt>esri.MapView</span><span class=p>;</span>
  <span class=nx>map</span>: <span class=kt>esri.Map</span><span class=p>;</span>

  <span class=kr>constructor</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span><span class=p>}</span>

  <span class=nx>ngOnInit() {</span>
    
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Still not broken!</p><p>Now let&rsquo;s init the map.</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript>  <span class=nx>ngOnInit() {</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>async</span> <span class=nx>init() {</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=p>[</span><span class=nx>Map</span><span class=p>,</span> <span class=nx>MapView</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=nx>await</span> <span class=nx>loadModules</span><span class=p>(</span><span class=p>[</span>
        <span class=s2>&#34;esri/Map&#34;</span><span class=p>,</span>
        <span class=s2>&#34;esri/views/MapView&#34;</span>
      <span class=p>]</span><span class=p>)</span><span class=p>)</span> <span class=kr>as</span> <span class=p>[</span><span class=nx>esri</span><span class=p>.</span><span class=nx>MapConstructor</span><span class=p>,</span> <span class=nx>esri</span><span class=p>.</span><span class=nx>MapViewConstructor</span><span class=p>]</span><span class=p>;</span>

      <span class=k>this</span><span class=p>.</span><span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>(</span><span class=p>{</span>
        <span class=nx>basemap</span><span class=o>:</span> <span class=s2>&#34;dark-gray&#34;</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MapView</span><span class=p>(</span><span class=p>{</span>
        <span class=nx>map</span>: <span class=kt>this.map</span><span class=p>,</span>
        <span class=nx>center</span><span class=o>:</span> <span class=p>[</span><span class=o>-</span><span class=mf>113.4909</span><span class=p>,</span> <span class=mf>53.544</span><span class=p>]</span><span class=p>,</span>
        <span class=nx>zoom</span>: <span class=kt>12</span><span class=p>,</span>
        <span class=nx>container</span>: <span class=kt>this.arcMapRef.nativeElement</span><span class=p>,</span>
        <span class=nx>ui</span><span class=o>:</span> <span class=p>{</span>
          <span class=nx>components</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;attribution&#34;</span><span class=p>]</span>
        <span class=p>}</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
</code></pre></div><p>I call another init because I like async/await and the lifecycle hooks yell at me when I throw an async in front of them. This just makes life a bit easier.</p><p>Hit save and you see &mldr;</p><p>#NOTHING!</p><p>This is because that div is very small. There is nothing HTMLy in it so it&rsquo;s tiny. We can fix that with some scss in <code>arcmap.component.scss</code></p><div class=highlight><pre class=chroma><code class=language-scss data-lang=scss><span class=nc>.</span><span class=nc>mapview</span> <span class=p>{</span>
    <span class=nt>height</span><span class=nd>:</span> <span class=nt>100</span><span class=err>%</span><span class=p>;</span>
    <span class=nt>width</span><span class=nd>:</span><span class=nd>100</span><span class=err>%</span><span class=p>;</span>
    <span class=nt>overflow</span><span class=nd>:</span> <span class=nt>hidden</span><span class=p>;</span>
<span class=p>}</span>

<span class=nc>.</span><span class=nc>ng-star-inserted</span> <span class=p>{</span>
    <span class=nt>height</span><span class=nd>:</span> <span class=nt>100</span><span class=err>%</span>
<span class=p>}</span>

</code></pre></div><p>Pow. You have an ESRI map sitting in your Angular app. It&rsquo;s centered on Edmonton because that&rsquo;s where I&rsquo;m from. Update the lat/lon in the init code to set it on your city if you&rsquo;re so interested.</p><p>Now is as good a time as any to add in a service for managing the state of our Map. To do this, I like to create a services module</p><p><code>ng g m services</code></p><p><code>ng g s services/arcmap</code></p><p>I decided that all I really want to do for my app is to set the center and zoom levels because really, what&rsquo;s a map that doesn&rsquo;t move around and zoom?</p><p>Inside of <code>src/services/arcmap.service.ts</code>&mldr;</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=kr>import</span> <span class=p>{</span> <span class=nx>Injectable</span><span class=p>,</span> <span class=nx>EventEmitter</span><span class=p>,</span> <span class=nx>Output</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>

<span class=kr>export</span> <span class=kr>interface</span> <span class=nx>Point</span> <span class=p>{</span>
  <span class=nx>lon</span>: <span class=kt>number</span><span class=p>;</span>
  <span class=nx>lat</span>: <span class=kt>number</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>@Injectable</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>providedIn</span><span class=o>:</span> <span class=s1>&#39;root&#39;</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>ArcmapService</span> <span class=p>{</span>
  <span class=kr>private</span> <span class=nx>mapZoom</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span>
  <span class=kr>private</span> <span class=nx>mapCenter</span>: <span class=kt>Point</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>lat</span><span class=o>:</span> <span class=o>-</span><span class=mf>113.4909</span><span class=p>,</span> <span class=nx>lon</span>: <span class=kt>53.544</span> <span class=p>}</span><span class=p>;</span>

  <span class=nx>esriCenter</span>: <span class=kt>Point</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>lat</span><span class=o>:</span> <span class=o>-</span><span class=mf>113.4909</span><span class=p>,</span> <span class=nx>lon</span>: <span class=kt>53.544</span> <span class=p>}</span><span class=p>;</span>
  <span class=nx>esriZoom</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span>

  <span class=kd>@Output</span><span class=p>(</span><span class=p>)</span>
  <span class=nx>zoomEmitter</span>: <span class=kt>EventEmitter</span><span class=o>&lt;</span><span class=kt>number</span><span class=o>&gt;</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventEmitter</span><span class=o>&lt;</span><span class=kt>number</span><span class=o>&gt;</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
  <span class=kd>@Output</span><span class=p>(</span><span class=p>)</span>
  <span class=nx>centerEmitter</span>: <span class=kt>EventEmitter</span><span class=o>&lt;</span><span class=nx>Point</span><span class=o>&gt;</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventEmitter</span><span class=o>&lt;</span><span class=nx>Point</span><span class=o>&gt;</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>

  <span class=kr>constructor</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span><span class=p>}</span>

  <span class=nx>setCenter</span><span class=p>(</span><span class=nx>p</span>: <span class=kt>Point</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mapCenter</span> <span class=o>=</span> <span class=nx>p</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>centerEmitter</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>mapCenter</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
  <span class=nx>get</span> <span class=nx>center() {</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>mapCenter</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>setZoom</span><span class=p>(</span><span class=nx>z</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mapZoom</span> <span class=o>=</span> <span class=nx>z</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>zoomEmitter</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>mapZoom</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>get</span> <span class=nx>zoom() {</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>mapZoom</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>setEsriZoom</span><span class=p>(</span><span class=nx>zoom</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>esriZoom</span> <span class=o>=</span> <span class=nx>zoom</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>setEsriCenter</span><span class=p>(</span><span class=nx>point</span>: <span class=kt>Point</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>esriCenter</span> <span class=o>=</span> <span class=nx>point</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>

</code></pre></div><p>Super easy. An interface for an x/y coordinate, a number for a zoom level, and a center of the previous interface for an x/y coordinate.</p><p>Next we&rsquo;ll add some listeners to our <code>arcmap.component.ts</code></p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=kr>import</span> <span class=p>{</span> <span class=nx>Component</span><span class=p>,</span> <span class=nx>OnInit</span><span class=p>,</span> <span class=nx>ViewChild</span><span class=p>,</span> <span class=nx>ElementRef</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>loadModules</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;esri-loader&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=nx>esri</span> <span class=o>=</span> <span class=nx>__esri</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>ArcmapService</span><span class=p>,</span> <span class=nx>Point</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../services/arcmap.service&#39;</span><span class=p>;</span>

<span class=kd>@Component</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>selector</span><span class=o>:</span> <span class=s1>&#39;app-arcmap&#39;</span><span class=p>,</span>
  <span class=nx>templateUrl</span><span class=o>:</span> <span class=s1>&#39;./arcmap.component.html&#39;</span><span class=p>,</span>
  <span class=nx>styleUrls</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;./arcmap.component.scss&#39;</span><span class=p>]</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>ArcmapComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
  <span class=kd>@ViewChild</span><span class=p>(</span><span class=s1>&#39;arcmap&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=kr>static</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span><span class=p>)</span>
  <span class=kr>private</span> <span class=nx>arcMapRef</span>: <span class=kt>ElementRef</span><span class=p>;</span>
  <span class=nx>mapView</span>: <span class=kt>esri.MapView</span><span class=p>;</span>
  <span class=nx>map</span>: <span class=kt>esri.Map</span><span class=p>;</span>

  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>arcMapService</span>: <span class=kt>ArcmapService</span><span class=p>)</span> <span class=p>{</span><span class=p>}</span>

  <span class=nx>ngOnInit() {</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>arcMapService</span><span class=p>.</span><span class=nx>zoomEmitter</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=p>(</span><span class=nx>zoom</span>: <span class=kt>number</span><span class=p>)</span> <span class=o>=</span><span class=o>&gt;</span> <span class=p>{</span>
      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;settnig zoom: &#39;</span> <span class=o>+</span> <span class=nx>zoom</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>zoom</span> <span class=o>=</span> <span class=nx>zoom</span><span class=p>;</span>
    <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>arcMapService</span><span class=p>.</span><span class=nx>centerEmitter</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=p>(</span><span class=nx>center</span>: <span class=kt>Point</span><span class=p>)</span> <span class=o>=</span><span class=o>&gt;</span> <span class=p>{</span>
      <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>center</span><span class=p>.</span><span class=nx>latitude</span> <span class=o>!==</span> <span class=nx>center</span><span class=p>.</span><span class=nx>lat</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>center</span><span class=p>.</span><span class=nx>longitude</span> <span class=o>!==</span> <span class=nx>center</span><span class=p>.</span><span class=nx>lon</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>goTo</span><span class=p>(</span><span class=p>{</span>
          <span class=nx>center</span><span class=o>:</span> <span class=p>[</span><span class=nx>center</span><span class=p>.</span><span class=nx>lon</span><span class=p>,</span> <span class=nx>center</span><span class=p>.</span><span class=nx>lat</span><span class=p>]</span>
        <span class=p>}</span><span class=p>)</span><span class=p>;</span>
      <span class=p>}</span>
    <span class=p>}</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>async</span> <span class=nx>initWidgets() {</span>
    <span class=kr>const</span> <span class=p>[</span><span class=nx>Search</span><span class=p>,</span> <span class=nx>BasemapGallery</span><span class=p>,</span> <span class=nx>Expand</span><span class=p>,</span> <span class=nx>Locate</span><span class=p>]</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>loadModules</span><span class=p>(</span><span class=p>[</span>
      <span class=s1>&#39;esri/widgets/Search&#39;</span><span class=p>,</span>
      <span class=s1>&#39;esri/widgets/BasemapGallery&#39;</span><span class=p>,</span>
      <span class=s1>&#39;esri/widgets/Expand&#39;</span><span class=p>,</span>
      <span class=s1>&#39;esri/widgets/Locate&#39;</span>
    <span class=p>]</span><span class=p>)</span><span class=p>;</span>
    <span class=kr>const</span> <span class=nx>locateWidget</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Locate</span><span class=p>(</span><span class=p>{</span>
      <span class=nx>view</span>: <span class=kt>this.mapView</span>
    <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=kr>const</span> <span class=nx>basemapWidget</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BasemapGallery</span><span class=p>(</span><span class=p>{</span> <span class=nx>view</span>: <span class=kt>this.mapView</span> <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=kr>const</span> <span class=nx>searchWidget</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Search</span><span class=p>(</span><span class=p>{</span>
      <span class=nx>view</span>: <span class=kt>this.mapView</span>
    <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>ui</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=k>new</span> <span class=nx>Expand</span><span class=p>(</span><span class=p>{</span> <span class=nx>view</span>: <span class=kt>this.mapView</span><span class=p>,</span> <span class=nx>content</span>: <span class=kt>searchWidget</span> <span class=p>}</span><span class=p>)</span><span class=p>,</span> <span class=s1>&#39;top-right&#39;</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>ui</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=k>new</span> <span class=nx>Expand</span><span class=p>(</span><span class=p>{</span> <span class=nx>view</span>: <span class=kt>this.mapView</span><span class=p>,</span> <span class=nx>content</span>: <span class=kt>basemapWidget</span> <span class=p>}</span><span class=p>)</span><span class=p>,</span> <span class=s1>&#39;top-right&#39;</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>ui</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>locateWidget</span><span class=p>,</span> <span class=s1>&#39;top-right&#39;</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=nx>async</span> <span class=nx>init() {</span>
    <span class=k>try</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=p>[</span><span class=nx>Map</span><span class=p>,</span> <span class=nx>MapView</span><span class=p>]</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>loadModules</span><span class=p>(</span><span class=p>[</span><span class=s1>&#39;esri/Map&#39;</span><span class=p>,</span> <span class=s1>&#39;esri/views/MapView&#39;</span><span class=p>]</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>map</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>(</span><span class=p>{</span>
        <span class=nx>basemap</span><span class=o>:</span> <span class=s1>&#39;hybrid&#39;</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MapView</span><span class=p>(</span><span class=p>{</span>
        <span class=nx>map</span>: <span class=kt>this.map</span><span class=p>,</span>
        <span class=nx>center</span><span class=o>:</span> <span class=p>[</span><span class=o>-</span><span class=mf>113.4909</span><span class=p>,</span> <span class=mf>53.544</span><span class=p>]</span><span class=p>,</span>
        <span class=nx>zoom</span>: <span class=kt>12</span><span class=p>,</span>
        <span class=nx>container</span>: <span class=kt>this.arcMapRef.nativeElement</span><span class=p>,</span>
        <span class=nx>ui</span><span class=o>:</span> <span class=p>{</span>
          <span class=nx>components</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;attribution&#39;</span><span class=p>]</span>
        <span class=p>}</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>mapView</span><span class=p>.</span><span class=nx>when</span><span class=p>(</span><span class=nx>async</span> <span class=p>(</span><span class=p>)</span> <span class=o>=</span><span class=o>&gt;</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>initWidgets</span><span class=p>(</span><span class=p>)</span><span class=p>;</span>
      <span class=p>}</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>

</code></pre></div><p>In the <code>ngOnInit</code> we set up all our listeners to our map service including how to react to the events along with some quality of life updates for initializing some widgets and the like.</p><p>I guess it&rsquo;s about now that I should prove to you that this thing works hey&mldr;</p><p>I&rsquo;m going to do this by making my app take you to a bunch of Canadian sports centers organized by city.</p><p>Under <code>app.component.ts</code> we&rsquo;ll need to add some data and a function to handle a click of this new data. Here you go, a component is born:</p><div class=highlight><pre class=chroma><code class=language-typescript data-lang=typescript><span class=kr>import</span> <span class=p>{</span> <span class=nx>Component</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
<span class=kr>import</span> <span class=p>{</span> <span class=nx>ArcmapService</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./services/arcmap.service&#39;</span><span class=p>;</span>

<span class=kd>@Component</span><span class=p>(</span><span class=p>{</span>
  <span class=nx>selector</span><span class=o>:</span> <span class=s1>&#39;app-root&#39;</span><span class=p>,</span>
  <span class=nx>templateUrl</span><span class=o>:</span> <span class=s1>&#39;./app.component.html&#39;</span><span class=p>,</span>
  <span class=nx>styleUrls</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;./app.component.scss&#39;</span><span class=p>]</span>
<span class=p>}</span><span class=p>)</span>
<span class=kr>export</span> <span class=kr>class</span> <span class=nx>AppComponent</span> <span class=p>{</span>
  <span class=nx>title</span> <span class=o>=</span> <span class=s1>&#39;esri-app&#39;</span><span class=p>;</span>
  <span class=nx>isMenuOpen</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>

  <span class=nx>navItems</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span>
      <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Calgary&#39;</span><span class=p>,</span>
      <span class=nx>locations</span><span class=o>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Saddledome&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>51.0374336</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>114.0519341</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>18</span>
        <span class=p>}</span><span class=p>,</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;McMahon Stadium&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>51.0703813</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>114.1214653</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>18</span>
        <span class=p>}</span>
      <span class=p>]</span>
    <span class=p>}</span><span class=p>,</span>
    <span class=p>{</span>
      <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Edmonton&#39;</span><span class=p>,</span>
      <span class=nx>locations</span><span class=o>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Rogers Place&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>53.5469828</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>113.4979082</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>19</span>
        <span class=p>}</span><span class=p>,</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Commonwealth Stadium&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>53.5596184</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>113.4761666</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>19</span>
        <span class=p>}</span>
      <span class=p>]</span>
    <span class=p>}</span><span class=p>,</span>
    <span class=p>{</span>
      <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Toronto&#39;</span><span class=p>,</span>
      <span class=nx>locations</span><span class=o>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Scotiabank Arena&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>43.6434661</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>79.3790989</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>20</span>
        <span class=p>}</span><span class=p>,</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;BMO Field&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>43.6332247</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>79.4185654</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>20</span>
        <span class=p>}</span>
      <span class=p>]</span>
    <span class=p>}</span><span class=p>,</span>
    <span class=p>{</span>
      <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Vancouver&#39;</span><span class=p>,</span>
      <span class=nx>locations</span><span class=o>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Rogers Arena&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>49.2778358</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>123.1088227</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>21</span>
        <span class=p>}</span><span class=p>,</span>
        <span class=p>{</span>
          <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;BC Place&#39;</span><span class=p>,</span>
          <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>lat</span>: <span class=kt>49.27675</span><span class=p>,</span>
            <span class=nx>lon</span><span class=o>:</span> <span class=o>-</span><span class=mf>123.111999</span>
          <span class=p>}</span><span class=p>,</span>
          <span class=nx>zoom</span>: <span class=kt>21</span>
        <span class=p>}</span>
      <span class=p>]</span>
    <span class=p>}</span>
  <span class=p>]</span><span class=p>;</span>
  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>service</span>: <span class=kt>ArcmapService</span><span class=p>)</span> <span class=p>{</span><span class=p>}</span>
  <span class=nx>onMenuToggle() {</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>isMenuOpen</span> <span class=o>=</span> <span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>isMenuOpen</span><span class=p>;</span>
  <span class=p>}</span>
  <span class=nx>onGotoLocation</span><span class=p>(</span><span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>lat</span>: <span class=kt>number</span><span class=p>;</span> <span class=nx>lon</span>: <span class=kt>number</span> <span class=p>}</span><span class=p>,</span> <span class=nx>zoom</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>setZoom</span><span class=p>(</span><span class=nx>zoom</span><span class=p>)</span><span class=p>;</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>setCenter</span><span class=p>(</span><span class=nx>location</span><span class=p>)</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>


</code></pre></div><p>Next to update the template to be useful</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>div</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span> <span class=na>fxFlexFill</span><span class=p></span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>mat-drawer-container</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;example-container&#34;</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;column&#34;</span> <span class=na>fxFlex</span><span class=p></span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>mat-drawer</span> <span class=na>mode</span><span class=o>=</span><span class=s>&#34;side&#34;</span> <span class=err>[</span><span class=na>opened</span><span class=err>]</span><span class=err>=</span><span class=err>&#34;</span><span class=na>isMenuOpen</span><span class=err>&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;app-sidenav&#34;</span><span class=p></span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>mat-card</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>mat-card-title</span><span class=p></span><span class=p>&gt;</span>Sports Venues<span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-card-title</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>mat-card-subtitle</span><span class=p></span><span class=p>&gt;</span>A small list<span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-card-subtitle</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-card</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>mat-nav-list</span> <span class=na>dense</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>span</span> <span class=err>*</span><span class=na>ngFor</span><span class=o>=</span><span class=s>&#34;let i of navItems&#34;</span><span class=p></span><span class=p>&gt;</span>
          <span class=p>&lt;</span><span class=nt>h3</span> <span class=na>matSubheader</span><span class=p></span><span class=p>&gt;</span>{{ i.title }}<span class=p>&lt;</span><span class=p>/</span><span class=nt>h3</span><span class=p>&gt;</span>
          <span class=p>&lt;</span><span class=nt>a</span> <span class=na>mat-list-item</span> <span class=err>*</span><span class=na>ngFor</span><span class=o>=</span><span class=s>&#34;let n of i.locations&#34;</span> <span class=err>(</span><span class=na>click</span><span class=err>)</span><span class=err>=</span><span class=err>&#34;</span><span class=na>onGotoLocation</span><span class=err>(</span><span class=na>n</span><span class=err>.</span><span class=na>location</span><span class=err>,</span> <span class=na>n</span><span class=err>.</span><span class=na>zoom</span><span class=err>)</span><span class=err>&#34;</span><span class=p></span><span class=p>&gt;</span>
            {{ n.title }}
          <span class=p>&lt;</span><span class=p>/</span><span class=nt>a</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=p>/</span><span class=nt>span</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-nav-list</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>mat-drawer-content</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;column&#34;</span><span class=p></span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>mat-toolbar</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;primary&#34;</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>button</span> <span class=na>mat-icon-button</span> <span class=err>(</span><span class=na>click</span><span class=err>)</span><span class=err>=</span><span class=err>&#34;</span><span class=na>onMenuToggle</span><span class=err>(</span><span class=err>)</span><span class=err>&#34;</span><span class=p></span><span class=p>&gt;</span>
          <span class=p>&lt;</span><span class=nt>mat-icon</span><span class=p></span><span class=p>&gt;</span>menu<span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-icon</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=p>/</span><span class=nt>button</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>h3</span><span class=p></span><span class=p>&gt;</span>ESRI Starter<span class=p>&lt;</span><span class=p>/</span><span class=nt>h3</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-toolbar</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>fxFlex</span> <span class=na>fxLayout</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p></span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;floating-panel&#34;</span><span class=p></span><span class=p>&gt;</span>
          <span class=p>&lt;</span><span class=nt>router-outlet</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>router-outlet</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>app-arcmap</span> <span class=na>fxFlex</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>app-arcmap</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer-content</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=p>/</span><span class=nt>mat-drawer-container</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=p>/</span><span class=nt>div</span><span class=p>&gt;</span>


</code></pre></div><p>Go ahead and refresh the app and you can browse some of Canada&rsquo;s finest sports locales!</p><p>My short time working with the ArcGIS JavaScript API has been an interesting one. It&rsquo;s impressively powerful and transitioned my opinions on GIS from &lsquo;So it&rsquo;s a map with some lines&rsquo; to &lsquo;LOOK AT ALL THE COOL THINGS&rsquo;.</p><p>The code on github has some more little knick-knacks added in. Feel free to explore and as questions! Especially around why I track two different map zoom levels and extents ;)</p></article></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/nasa-has-an-api/><span class="iconfont icon-article"></span>NASA has an API!</a></p><p><a class=link href=/arcgis-upgrade/><span class="iconfont icon-article"></span>ArcGIS Upgrade Error 28809</a></p></section><section class="article discussion"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"https-blog-jimdhughes-com"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>2020 James Hughes.</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-61647183-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>